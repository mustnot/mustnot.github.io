{"componentChunkName":"component---src-templates-blog-post-js","path":"/Hadoop/aws-ec2에-hadoop-cluster-구성/","result":{"data":{"site":{"siteMetadata":{"title":"mustnot","author":"[mustnot]","siteUrl":"https://mustnot.github.io","comment":{"disqusShortName":"mustnot","utterances":"mustnot/mustnot.github.io"},"sponsor":{"buyMeACoffeeId":"jbee"}}},"markdownRemark":{"id":"1f8e05a7-f08d-5aee-941c-766c4b4e03c2","excerpt":"입사 초기 개발을 시작한지 얼마 안되었던 시점에 도전했던 Hadoop을 다시 정리했습니다. AWS EC2 3대(NameNode 1대, DataNode 2대)로 구성했습니다. Hadoop Cluster Hadoop 설치 과정에 대해 순서대로 정리 1. Hadoop 설치 1) 패키지 관리자 업데이트, 호스트 네임 변경 2) Hadoop 설치 Hadoop Mirror 에서 설치하고자하는 버전에 맞춰 설치한다. 3) 환경변수 설정 2. Hadoop 공통 설정 1) hadoop-env.sh 2) core…","html":"<blockquote>\n<p>입사 초기 개발을 시작한지 얼마 안되었던 시점에 도전했던 Hadoop을 다시 정리했습니다. AWS EC2 3대(NameNode 1대, DataNode 2대)로 구성했습니다.</p>\n</blockquote>\n<h2 id=\"hadoop-cluster\" style=\"position:relative;\"><a href=\"#hadoop-cluster\" aria-label=\"hadoop cluster permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop Cluster</h2>\n<blockquote>\n<p>Hadoop 설치 과정에 대해 순서대로 정리</p>\n</blockquote>\n<br>\n<h3 id=\"1-hadoop-설치\" style=\"position:relative;\"><a href=\"#1-hadoop-%EC%84%A4%EC%B9%98\" aria-label=\"1 hadoop 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Hadoop 설치</h3>\n<h4 id=\"1-패키지-관리자-업데이트-호스트-네임-변경\" style=\"position:relative;\"><a href=\"#1-%ED%8C%A8%ED%82%A4%EC%A7%80-%EA%B4%80%EB%A6%AC%EC%9E%90-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%ED%98%B8%EC%8A%A4%ED%8A%B8-%EB%84%A4%EC%9E%84-%EB%B3%80%EA%B2%BD\" aria-label=\"1 패키지 관리자 업데이트 호스트 네임 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) 패키지 관리자 업데이트, 호스트 네임 변경</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> -y upgrade\n$ <span class=\"token function\">sudo</span> hostnamectl set-hostname hadoop-namenode\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">reboot</span></code></pre></div>\n<h4 id=\"2-hadoop-설치\" style=\"position:relative;\"><a href=\"#2-hadoop-%EC%84%A4%EC%B9%98\" aria-label=\"2 hadoop 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) Hadoop 설치</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install java version 8</span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> openjdk-8-jdk -y\n\n<span class=\"token comment\"># install hadoop 3.3.0</span>\n$ <span class=\"token function\">wget</span> https://downloads.apache.org/hadoop/common/hadoop-3.3.0/hadoop-3.3.0.tar.gz -P ~/Downloads\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">tar</span> zxvf ~/Downloads/hadoop-3.3.0.tar.gz -C /usr/local\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> /usr/local/hadoop-3.3.0 /usr/local/hadoop</code></pre></div>\n<ul>\n<li><a href=\"http://www.apache.org/dyn/closer.cgi/hadoop/common/\">Hadoop Mirror</a> 에서 설치하고자하는 버전에 맞춰 설치한다.</li>\n</ul>\n<h4 id=\"3-환경변수-설정\" style=\"position:relative;\"><a href=\"#3-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EC%84%A4%EC%A0%95\" aria-label=\"3 환경변수 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3) 환경변수 설정</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">nano</span> ~/.bashrc\n<span class=\"token comment\"># java 경로 확인</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">JAVA_HOME</span><span class=\"token operator\">=</span>/usr/lib/jvm/java-8-openjdk-amd64\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HADOOP_HOME</span><span class=\"token operator\">=</span>/usr/local/hadoop\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HADOOP_CONF_DIR</span><span class=\"token operator\">=</span>/usr/local/hadoop/etc/hadoop\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token environment constant\">$PATH</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$JAVA_HOME</span>/bin:<span class=\"token variable\">$HADOOP_HOME</span>/bin:<span class=\"token variable\">$HADOOP_HOME</span>/sbin\n\n$ <span class=\"token builtin class-name\">source</span> ~/.bashrc\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R ubuntu <span class=\"token variable\">$HADOOP_HOME</span></code></pre></div>\n<br>\n<h3 id=\"2-hadoop-공통-설정\" style=\"position:relative;\"><a href=\"#2-hadoop-%EA%B3%B5%ED%86%B5-%EC%84%A4%EC%A0%95\" aria-label=\"2 hadoop 공통 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Hadoop 공통 설정</h3>\n<h4 id=\"1-hadoop-envsh\" style=\"position:relative;\"><a href=\"#1-hadoop-envsh\" aria-label=\"1 hadoop envsh permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) hadoop-env.sh</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$HADOOP_CONF_DIR</span>\n$ <span class=\"token function\">vim</span> hadoop-env.sh\n<span class=\"token comment\"># The java implementation to use. By default, this environment</span>\n<span class=\"token comment\"># variable is REQUIRED on ALL platforms except OS X!</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">JAVA_HOME</span><span class=\"token operator\">=</span>/usr/lib/jvm/java-8-openjdk-amd64</code></pre></div>\n<h4 id=\"2-core-sitexml\" style=\"position:relative;\"><a href=\"#2-core-sitexml\" aria-label=\"2 core sitexml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) core-site.xml</h4>\n<p>해당 노드(서버)에게 <code class=\"language-text\">namenode</code> 정보를 전달하는 역할</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>fs.defaultFS<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>hdfs://<span class=\"token punctuation\">[</span>namenode private ip<span class=\"token punctuation\">]</span>:900<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>/value<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<h4 id=\"3-yarn-sitexml\" style=\"position:relative;\"><a href=\"#3-yarn-sitexml\" aria-label=\"3 yarn sitexml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3) yarn-site.xml</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span>-- Site specific YARN configuration properties --<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>yarn.nodemanager.aux-services<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>mapreduce_shuffle<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>yarn.resourcemanager.hostname<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span><span class=\"token punctuation\">[</span>namenode private ip<span class=\"token punctuation\">]</span><span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<h4 id=\"4-mapred-sitexml\" style=\"position:relative;\"><a href=\"#4-mapred-sitexml\" aria-label=\"4 mapred sitexml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4) mapred-site.xml</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>mapreduce.jobtracker.address<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span><span class=\"token punctuation\">[</span>namenode private ip<span class=\"token punctuation\">]</span>:5431<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>&lt;</span>/value<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>mapreduce.framework.name<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>yarn<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<br>\n<h3 id=\"3-hadoop-datanode-생성-및-설정\" style=\"position:relative;\"><a href=\"#3-hadoop-datanode-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EC%84%A4%EC%A0%95\" aria-label=\"3 hadoop datanode 생성 및 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Hadoop DataNode 생성 및 설정</h3>\n<h4 id=\"1-namenode-인스턴스에서-템플릿-생성\" style=\"position:relative;\"><a href=\"#1-namenode-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EC%97%90%EC%84%9C-%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%83%9D%EC%84%B1\" aria-label=\"1 namenode 인스턴스에서 템플릿 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) NameNode 인스턴스에서 템플릿 생성</h4>\n<img width=\"962\" alt=\"image-20210214192140896\" src=\"https://user-images.githubusercontent.com/52126612/108061291-6e6fe200-709b-11eb-92ad-66a56d19acf5.png\">\n<h4 id=\"2-생성한-템플릿으로-인스턴스-생성\" style=\"position:relative;\"><a href=\"#2-%EC%83%9D%EC%84%B1%ED%95%9C-%ED%85%9C%ED%94%8C%EB%A6%BF%EC%9C%BC%EB%A1%9C-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1\" aria-label=\"2 생성한 템플릿으로 인스턴스 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) 생성한 템플릿으로 인스턴스 생성</h4>\n<ul>\n<li>필요한 DataNode만큼 생성하기 (여기서는 총 3대를 생성했다)</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/52126612/108061297-7039a580-709b-11eb-83fa-0cc31276d064.png\" alt=\"image-20210214193026734\"></p>\n<h4 id=\"3-패키지-관리자-업데이트-호스트네임-변경\" style=\"position:relative;\"><a href=\"#3-%ED%8C%A8%ED%82%A4%EC%A7%80-%EA%B4%80%EB%A6%AC%EC%9E%90-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%ED%98%B8%EC%8A%A4%ED%8A%B8%EB%84%A4%EC%9E%84-%EB%B3%80%EA%B2%BD\" aria-label=\"3 패키지 관리자 업데이트 호스트네임 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3) 패키지 관리자 업데이트, 호스트네임 변경</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> upgrade -y\n$ <span class=\"token function\">sudo</span> hostnamectl set-hostname hadoop-datanode-01\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">reboot</span></code></pre></div>\n<br>\n<h3 id=\"4-namenode와-datanode-연결-설정\" style=\"position:relative;\"><a href=\"#4-namenode%EC%99%80-datanode-%EC%97%B0%EA%B2%B0-%EC%84%A4%EC%A0%95\" aria-label=\"4 namenode와 datanode 연결 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. NameNode와 DataNode 연결 설정</h3>\n<h4 id=\"1-ssh-config로-연결-설정\" style=\"position:relative;\"><a href=\"#1-ssh-config%EB%A1%9C-%EC%97%B0%EA%B2%B0-%EC%84%A4%EC%A0%95\" aria-label=\"1 ssh config로 연결 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) ssh config로 연결 설정</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">nano</span> ~/.ssh/config\nHost hadoop-datanode-01\n  HostName <span class=\"token punctuation\">[</span>Private IP<span class=\"token punctuation\">]</span>\n  User ubuntu\n  IdentityFile ~/.ssh/hadoop.pem\n\nHost hadoop-datanode-02\n  HostName <span class=\"token punctuation\">[</span>Private IP<span class=\"token punctuation\">]</span>\n  User ubuntu\n  IdentityFile ~/.ssh/hadoop.pem\n\nHost hadoop-datanode-03\n  HostName <span class=\"token punctuation\">[</span>Private IP<span class=\"token punctuation\">]</span>\n  User ubuntu\n  IdentityFile ~/.ssh/hadoop.pem</code></pre></div>\n<h4 id=\"2-비밀번호-없이-각-datanode에-ssh-설정\" style=\"position:relative;\"><a href=\"#2-%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%97%86%EC%9D%B4-%EA%B0%81-datanode%EC%97%90-ssh-%EC%84%A4%EC%A0%95\" aria-label=\"2 비밀번호 없이 각 datanode에 ssh 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) 비밀번호 없이 각 DataNode에 ssh 설정</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ssh-keygen -f ~/.ssh/id_rsa -t rsa -P <span class=\"token string\">\"\"</span>\n$ <span class=\"token function\">cat</span> ~/.ssh/id_rsa.pub <span class=\"token operator\">>></span> ~/.ssh/authorized_keys\n$ <span class=\"token function\">ssh</span> hadoop-datanode-01 <span class=\"token string\">'cat >> ~/.ssh/authorized_keys'</span> <span class=\"token operator\">&lt;</span> ~/.ssh/id_rsa.pub\n$ <span class=\"token function\">ssh</span> hadoop-datanode-02 <span class=\"token string\">'cat >> ~/.ssh/authorized_keys'</span> <span class=\"token operator\">&lt;</span> ~/.ssh/id_rsa.pub\n$ <span class=\"token function\">ssh</span> hadoop-datanode-03 <span class=\"token string\">'cat >> ~/.ssh/authorized_keys'</span> <span class=\"token operator\">&lt;</span> ~/.ssh/id_rsa.pub</code></pre></div>\n<h4 id=\"3-hdfs-sitexml\" style=\"position:relative;\"><a href=\"#3-hdfs-sitexml\" aria-label=\"3 hdfs sitexml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3) hdfs-site.xml</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$HADOOP_CONF_DIR</span>\n$ <span class=\"token function\">vim</span> hdfs-site.xml\n<span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs.replication<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span><span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>&lt;</span>/value<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs.namenode.name.dir<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>file:///usr/local/hadoop/data/hdfs/namenode<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> -p <span class=\"token variable\">$HADOOP_HOME</span>/data/hdfs/namenode</code></pre></div>\n<h4 id=\"4-workers\" style=\"position:relative;\"><a href=\"#4-workers\" aria-label=\"4 workers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4) workers</h4>\n<blockquote>\n<p>slaves로 작성하기도 했는데, workers로 이름이 변경된 것으로 보인다. workers 파일에 아래와 같이 작성</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vim</span> workers\nhadoop-datanode-01\nhadoop-datanode-02\nhadoop-datanode-03</code></pre></div>\n<br>\n<h3 id=\"5-datanode-설정\" style=\"position:relative;\"><a href=\"#5-datanode-%EC%84%A4%EC%A0%95\" aria-label=\"5 datanode 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. DataNode 설정</h3>\n<blockquote>\n<p>2.Hadoop 설치부터 4.Hadoop 환결설정까지 완료되어 있어야한다.</p>\n</blockquote>\n<h4 id=\"1-yarn-sitexml\" style=\"position:relative;\"><a href=\"#1-yarn-sitexml\" aria-label=\"1 yarn sitexml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) yarn-site.xml</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>yarn.nodemanager.local-dirs<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>file:///usr/local/hadoop/yarn/local<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> -p <span class=\"token variable\">$HADOOP_HOME</span>/yarn/local</code></pre></div>\n<br>\n<h4 id=\"2-hdfs-sitexml\" style=\"position:relative;\"><a href=\"#2-hdfs-sitexml\" aria-label=\"2 hdfs sitexml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) hdfs-site.xml</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs.replication<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span><span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>&lt;</span>/value<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs.datanode.data.dir<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>file:///usr/local/hadoop/data/hdfs/datanode<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span>\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> -p <span class=\"token variable\">$HADOOP_HOME</span>/data/hdfs/datanode</code></pre></div>\n<br>\n<h3 id=\"6-hadoop-cluster-실행\" style=\"position:relative;\"><a href=\"#6-hadoop-cluster-%EC%8B%A4%ED%96%89\" aria-label=\"6 hadoop cluster 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Hadoop Cluster 실행</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ hdfs namenode -format\n$ start-dfs.sh\n$ start-yarn.sh\n<span class=\"token comment\"># mr-jobhistory-daemon.sh start historyserver에서 아래 명령어로 변경되었다.</span>\n$ mapred --daemon start historyserver</code></pre></div>\n<br>\n<h4 id=\"1-노드-정보-확인\" style=\"position:relative;\"><a href=\"#1-%EB%85%B8%EB%93%9C-%EC%A0%95%EB%B3%B4-%ED%99%95%EC%9D%B8\" aria-label=\"1 노드 정보 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) 노드 정보 확인</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ hdfs dfsadmin -report\nConfigured Capacity: <span class=\"token number\">24777043968</span> <span class=\"token punctuation\">(</span><span class=\"token number\">23.08</span> GB<span class=\"token punctuation\">)</span>\nPresent Capacity: <span class=\"token number\">13303332864</span> <span class=\"token punctuation\">(</span><span class=\"token number\">12.39</span> GB<span class=\"token punctuation\">)</span>\nDFS Remaining: <span class=\"token number\">13303259136</span> <span class=\"token punctuation\">(</span><span class=\"token number\">12.39</span> GB<span class=\"token punctuation\">)</span>\nDFS Used: <span class=\"token number\">73728</span> <span class=\"token punctuation\">(</span><span class=\"token number\">72</span> KB<span class=\"token punctuation\">)</span>\nDFS Used%: <span class=\"token number\">0.00</span>%\nReplicated Blocks:\n\tUnder replicated blocks: <span class=\"token number\">0</span>\n\tBlocks with corrupt replicas: <span class=\"token number\">0</span>\n\tMissing blocks: <span class=\"token number\">0</span>\n\tMissing blocks <span class=\"token punctuation\">(</span>with replication factor <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>: <span class=\"token number\">0</span>\n\tLow redundancy blocks with highest priority to recover: <span class=\"token number\">0</span>\n\tPending deletion blocks: <span class=\"token number\">0</span>\nErasure Coded Block Groups:\n\tLow redundancy block groups: <span class=\"token number\">0</span>\n\tBlock <span class=\"token function\">groups</span> with corrupt internal blocks: <span class=\"token number\">0</span>\n\tMissing block groups: <span class=\"token number\">0</span>\n\tLow redundancy blocks with highest priority to recover: <span class=\"token number\">0</span>\n\tPending deletion blocks: <span class=\"token number\">0</span>\n\n-------------------------------------------------\nLive datanodes <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>:</code></pre></div>\n<br>\n<h4 id=\"2-전체-종료\" style=\"position:relative;\"><a href=\"#2-%EC%A0%84%EC%B2%B4-%EC%A2%85%EB%A3%8C\" aria-label=\"2 전체 종료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) 전체 종료</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ stop-dfs.sh\n$ stop-yarn.sh\n$ mapred --daemon stop historyserver</code></pre></div>\n<br>\n<h2 id=\"zookeeper\" style=\"position:relative;\"><a href=\"#zookeeper\" aria-label=\"zookeeper permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zookeeper</h2>\n<blockquote>\n<p>ZooKeeper is a centralized service for maintaining configuration information, naming, providing distributed synchronization, and providing group services</p>\n</blockquote>\n<p>축약하면, 안정적인 분산 조정 관리 서버로 데이터 변경사항과 실패에 대한 모니터링을 제공하며 분산된 환경에서 API 뿐 아니라 아키텍처도 쉽게 관리할 수 있다. 분산 시스템의 장점을 갖고 있어 하나 혹은 몇개가 중단되더라도 나머지가 정상 작동하여 시스템을 유지하며 다운타임 없이도 선형적인 서버 확장을 통해 성능 향상이 가능하다.</p>\n<p>Zookeeper의 역할을 간단히 살펴보면 분산 조정 기능으로 하나의 서버에만 서비스가 집중되지 않도록 하고 다른 서버와 동기화를 통해 안정성을 보장, 운영서버가 중단되더라도 대기 서버를 운영 서버로 변경하여 중지되지 않도록한다. 환경설정 통합 관리를 제공하고, 과반수의 룰이 적용되어 데이터의 신뢰성을 높여준다.</p>\n<br>\n<h3 id=\"1-zookeeper-설치\" style=\"position:relative;\"><a href=\"#1-zookeeper-%EC%84%A4%EC%B9%98\" aria-label=\"1 zookeeper 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Zookeeper 설치</h3>\n<blockquote>\n<p>⛔ Zookeeper는 과반수의 룰로 최소 3대 이상 서버가 필요합니다.</p>\n</blockquote>\n<br>\n<h4 id=\"1-zookeeper-다운로드\" style=\"position:relative;\"><a href=\"#1-zookeeper-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\" aria-label=\"1 zookeeper 다운로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) zookeeper 다운로드</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">wget</span> https://downloads.apache.org/zookeeper/zookeeper-3.6.2/apache-zookeeper-3.6.2-bin.tar.gz -P ~/Downloads\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">tar</span> zxvf ~/Downloads/apache-zookeeper-3.6.2-bin.tar.gz -C /usr/local\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> /usr/local/apache-zookeeper-3.6.2-bin /usr/local/zookeeper</code></pre></div>\n<br>\n<h4 id=\"2-환경변수-설정\" style=\"position:relative;\"><a href=\"#2-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-%EC%84%A4%EC%A0%95\" aria-label=\"2 환경변수 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) 환경변수 설정</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vim</span> ~/.bashrc\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">ZOOKEEPER_HOME</span><span class=\"token operator\">=</span>/usr/local/zookeeper\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">ZOOKEEPER_CONF_DIR</span><span class=\"token operator\">=</span>/usr/local/zookeeper/conf\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token environment constant\">$PATH</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$ZOOKEEPER_HOME</span>/bin\n\n$ <span class=\"token builtin class-name\">source</span> ~/.bashrc\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R ubuntu <span class=\"token variable\">$ZOOKEEPER_HOME</span></code></pre></div>\n<br>\n<h3 id=\"2-zookeeper-설정\" style=\"position:relative;\"><a href=\"#2-zookeeper-%EC%84%A4%EC%A0%95\" aria-label=\"2 zookeeper 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Zookeeper 설정</h3>\n<h4 id=\"1-zoocfg\" style=\"position:relative;\"><a href=\"#1-zoocfg\" aria-label=\"1 zoocfg permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) zoo.cfg</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$ZOOKEEPER_CONF_DIR</span>\n$ <span class=\"token function\">cp</span> zoo_sample.cfg zoo.cfg\n$ <span class=\"token function\">vim</span> zoo.cfg\n<span class=\"token assign-left variable\">dataDir</span><span class=\"token operator\">=</span>/usr/local/zookeeper/data\nserver.0<span class=\"token operator\">=</span>hadoop-namenode:2888:3888\nserver.1<span class=\"token operator\">=</span>hadoop-datanode-01:2888:3888\nserver.2<span class=\"token operator\">=</span>hadoop-datanode-02:2888:3888\n\n$ <span class=\"token function\">mkdir</span> -p <span class=\"token variable\">$ZOOKEEPER_HOME</span>/data</code></pre></div>\n<h4 id=\"2-myid\" style=\"position:relative;\"><a href=\"#2-myid\" aria-label=\"2 myid permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) myid</h4>\n<p>myid는 0부터 시작한다. 참고하자. 간혹 1부터 설정한 경우 서버에서 0으로 재설정하고 재시작 후에 <code class=\"language-text\">zoo.cfg</code> 설정과 맞지 않아 실행에 에러가 날 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">hadoop-namenode:$ <span class=\"token builtin class-name\">echo</span> <span class=\"token number\">0</span> <span class=\"token operator\">></span> <span class=\"token variable\">$ZOOKEEPER_HOME</span>/data/myid\nhadoop-datanode-01:$ <span class=\"token builtin class-name\">echo</span> <span class=\"token number\">1</span> <span class=\"token operator\">></span> <span class=\"token variable\">$ZOOKEEPER_HOME</span>/data/myid\nhadoop-datanode-02:$ <span class=\"token builtin class-name\">echo</span> <span class=\"token number\">2</span> <span class=\"token operator\">></span> <span class=\"token variable\">$ZOOKEEPER_HOME</span>/data/myid</code></pre></div>\n<br>\n<h3 id=\"3-zookeeper-실행\" style=\"position:relative;\"><a href=\"#3-zookeeper-%EC%8B%A4%ED%96%89\" aria-label=\"3 zookeeper 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Zookeeper 실행</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ zkServer.sh start\n$ zkServer.sh status\nMode: follower or leader</code></pre></div>\n<h2 id=\"comment\" style=\"position:relative;\"><a href=\"#comment\" aria-label=\"comment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Comment</h2>\n<p>설치하며 가장 애먹었던 부분은 실행이 되었는데도 불구하고 정상적인 결과가 나타나지 않았다는 점이다. 분명히 설정이 잘되어 있는 것으로 보였는데, Hadoop 실행 중에 다양한 포트들의 설정이 필요하다는 점을 간과했다는 점이다.</p>","frontmatter":{"title":"AWS EC2에 Hadoop Cluster 구성","date":"February 14, 2021"}}},"pageContext":{"slug":"/Hadoop/aws-ec2에-hadoop-cluster-구성/","previous":{"fields":{"slug":"/Kafka/aws-ec2에-kafka-cluter-구성/"},"frontmatter":{"title":"AWS EC2에 Kafka Cluter 구성","category":"Kafka","draft":false}},"next":null}},"staticQueryHashes":["2486386679","3128451518"]}