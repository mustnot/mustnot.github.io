{"componentChunkName":"component---src-templates-blog-post-js","path":"/Django/django-튜토리얼/","result":{"data":{"site":{"siteMetadata":{"title":"MUSTNOT","author":"[mustnot]","siteUrl":"https://mustnot.github.io","comment":{"disqusShortName":"","utterances":"mustnot/mustnot.github.io"},"sponsor":{"buyMeACoffeeId":"jbee"}}},"markdownRemark":{"id":"0c8c491a-4094-5c37-be67-d514e6af885e","excerpt":"Django Tutorial Part 1 먼저 Django 설치가 되었다고 가정하고, 설치된 Django의 버전을 확인하여 설치가 제대로 되었는지 확인한다. ㅤ 프로젝트 만들기 Django는 초기 설정에 주의를 기울여야한다. 그 이유는 Django Project를 시작할 때 구성하는 코드를 자동 생성해야하는데, 이 과정에서 데이터베이스 설정, Django를 위한 옵션들, 애플리케이션을 위한 설정들과 같은 Django…","html":"<h2 id=\"django-tutorial-part-1\" style=\"position:relative;\"><a href=\"#django-tutorial-part-1\" aria-label=\"django tutorial part 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django Tutorial Part 1</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python -m django --version\n<span class=\"token number\">3.0</span>.8</code></pre></div>\n<p>먼저 Django 설치가 되었다고 가정하고, 설치된 Django의 버전을 확인하여 설치가 제대로 되었는지 확인한다.</p>\n<p>ㅤ</p>\n<h3 id=\"프로젝트-만들기\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"프로젝트 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로젝트 만들기</h3>\n<p>Django는 초기 설정에 주의를 기울여야한다. 그 이유는 Django Project를 시작할 때 구성하는 코드를 자동 생성해야하는데, 이 과정에서 데이터베이스 설정, Django를 위한 옵션들, 애플리케이션을 위한 설정들과 같은 Django 인스턴스를 구성하는 수많은 설정들이 생성되기 때문이다. 다음 명령어를 실행하면 프로젝트를 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ django-admin startproject mysite\n$ tree\n<span class=\"token builtin class-name\">.</span>\n└── mysite\n    ├── manage.py\n    └── mysite\n        ├── __init__.py\n        ├── asgi.py\n        ├── settings.py\n        ├── urls.py\n        └── wsgi.py</code></pre></div>\n<p>ㅤ</p>\n<p>프로젝트를 생성하고 나면 위 tree 결과처럼 프로젝트 폴더를 하나 생성하고 그 안에 <code class=\"language-text\">manage.py</code>와 <code class=\"language-text\">mysite</code>라는 디렉토리를 생성한다. 이 과정이 정상적으로 이루어졌다면, <code class=\"language-text\">django-admin</code> 실행에 문제가 없다는 것을 의미한다.</p>\n<blockquote>\n<p>이 때 프로젝트 생성시 Django에서 이미 사용 중인 이름은 피해야한다. 아마 Python에서 내부 모듈 참조시 충돌이 일어나기 때문으로 생각되며 대표적인 예로는 _django, _test 등이 이에 속한다.</p>\n</blockquote>\n<p>ㅤ</p>\n<p>생성된 프로젝트 내 <code class=\"language-text\">mysite</code> 디렉토리를 자세히 살펴보면 다음과 같다.</p>\n<table>\n<thead>\n<tr>\n<th>directory or file</th>\n<th>description</th>\n<th>Reference</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">manage.py</code></td>\n<td>Django 프로젝트와 다양한 방법으로 상호작용하는 커맨드라인의 유틸리티</td>\n<td><a href=\"https://docs.djangoproject.com/ko/3.0/ref/django-admin/\">django-admin and manage.py</a></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">mysite/</code></td>\n<td>디렉토리 내부에는 프로젝트를 위한 실제 Python 패키지들이 저장된다.</td>\n<td></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">mysite/__init__.py</code></td>\n<td>Python으로 하여금 이 디렉토리를 패키지처럼 다루라고 알려주는 용도의 단순한 빈 파일</td>\n<td></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">mysite/settings.py</code></td>\n<td>프로젝트의 환경 및 구성을 저장</td>\n<td><a href=\"https://docs.djangoproject.com/ko/3.0/topics/settings/\">django-settings</a></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">mysite/urls.py</code></td>\n<td>프로젝트의 URL 선언을 저장합니다.</td>\n<td><a href=\"https://docs.djangoproject.com/ko/3.0/topics/http/urls/\">djagon-url-dispatcher</a></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">mysite/asgi.py</code></td>\n<td>ASGI (잘 모르겠다)</td>\n<td></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">mysite/wsgi.py</code></td>\n<td>프로젝트를 서비스하기 위한 WSGI 호환 웹 서버의 설정</td>\n<td><a href=\"https://docs.djangoproject.com/ko/3.0/howto/deployment/wsgi/\">How to deploy with WSGI</a></td>\n</tr>\n</tbody>\n</table>\n<p>ㅤ</p>\n<h3 id=\"서버-실행하기\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"서버 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버 실행하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python manage.py runserver\nWatching <span class=\"token keyword\">for</span> <span class=\"token function\">file</span> changes with StatReloader\nPerforming system checks<span class=\"token punctuation\">..</span>.\n\nSystem check identified no issues <span class=\"token punctuation\">(</span><span class=\"token number\">0</span> silenced<span class=\"token punctuation\">)</span>.\n\nYou have <span class=\"token number\">17</span> unapplied migration<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>. Your project may not work properly <span class=\"token keyword\">until</span> you apply the migrations <span class=\"token keyword\">for</span> app<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>: admin, auth, contenttypes, sessions.\nRun <span class=\"token string\">'python manage.py migrate'</span> to apply them.\n\nAugust 03, <span class=\"token number\">2020</span> - <span class=\"token number\">12</span>:17:21\nDjango version <span class=\"token number\">3.0</span>.9, using settings <span class=\"token string\">'mysite.settings'</span>\nStarting development server at http://127.0.0.1:8000/\nQuit the server with CONTROL-C.</code></pre></div>\n<p>ㅤ</p>\n<p>ㅤ</p>\n<h3 id=\"설문조사-앱-만들기\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EB%AC%B8%EC%A1%B0%EC%82%AC-%EC%95%B1-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"설문조사 앱 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설문조사 앱 만들기</h3>\n<p>Django에서는 App (앱)의 기본 디렉토리 구조를 자동으로 생성할 수 있는 도구를 제공하여 코드에만 집중할 수 있는 환경을 제공합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python manage.py startapp polls\n$ tree\n├── db.sqlite3\n├── manage.py\n├── mysite\n│   ├── __init__.py\n│   ├── asgi.py\n│   ├── settings.py\n│   ├── urls.py\n│   └── wsgi.py\n└── polls\n    ├── __init__.py\n    ├── admin.py\n    ├── apps.py\n    ├── migrations\n    │   └── __init__.py\n    ├── models.py\n    ├── tests.py\n    └── views.py</code></pre></div>\n<p>ㅤ</p>\n<p><code class=\"language-text\">python manage.py startapp &lt;appname&gt;</code>을 이용하여 <code class=\"language-text\">app</code>을 생성하면 위와 같은 형태의 디렉토리를 통해 구조를 만들어준다. 위에서 언급한 바와 같이 Django는 개발자로 하여금 코드에만 집중할 수 있는 환경을 제공해주는 것 같아서 이런 부분은 정말로 마음에 들었다.</p>\n<blockquote>\n<p>Flask를 다시 보면 맨땅에 헤딩한 기분이랄까..?</p>\n</blockquote>\n<p>ㅤ</p>\n<h3 id=\"첫-번째-뷰-작성하기\" style=\"position:relative;\"><a href=\"#%EC%B2%AB-%EB%B2%88%EC%A7%B8-%EB%B7%B0-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"첫 번째 뷰 작성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>첫 번째 뷰 작성하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># mysite/polls/views.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello, world. You're at the polls index.\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># mysite/polls/urls.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views\n\nurlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># mysite/urls.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> include<span class=\"token punctuation\">,</span> path\n\nurlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">'polls/'</span><span class=\"token punctuation\">,</span> include<span class=\"token punctuation\">(</span><span class=\"token string\">'polls.urls'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">'admin/'</span><span class=\"token punctuation\">,</span> admin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>urls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>가장 먼저 <code class=\"language-text\">polls/views.py</code>에 <code class=\"language-text\">request</code> 을 인수로 받는 함수 <code class=\"language-text\">index</code>를 생성하고 <code class=\"language-text\">return</code>은 <code class=\"language-text\">HttpResponse</code>로 텍스트 형태의 리스폰스를 받는 코드를 작성하였다. 그 후 기존에 <code class=\"language-text\">startapp</code>으로 처음 디렉토리가 생성되었을 때에는 없었던 <code class=\"language-text\">urls.py</code> 파일을 생성한 후 <code class=\"language-text\">polls</code> 폴더에 있는 <code class=\"language-text\">views</code>를 <code class=\"language-text\">import</code>하여 <code class=\"language-text\">path</code> 경로를 설정해주었다. 이후 이렇게 매핑된 <code class=\"language-text\">urls.py</code> 를 가장 최상위 단계의 <code class=\"language-text\">URLconf</code> 에서도 참조할 수 있도록 코드를 짜주면 앞으로 <code class=\"language-text\">/polls/</code> 로 들어오는 모든 요청에 대해서 <code class=\"language-text\">views.py</code>에 작성한 <code class=\"language-text\">HttpsResponse</code>를 리턴한다.</p>\n<blockquote>\n<p>여기서 include() 란, 다른 URL 패턴을 포함할 때마다 항상 include()를 사용해야하며 admin.site.urls 가 유일한 예외가 된다. Flask의 Blueprint와 동일한 기능이라 생각하면 좋을 것 같다\n(하면 할수록 flask의 blueprint와 django의 app이 비슷하다고 생각되는건 맞는지 모르겠다.)</p>\n</blockquote>\n<h3 id=\"pathroute-view-kwargs-name\" style=\"position:relative;\"><a href=\"#pathroute-view-kwargs-name\" aria-label=\"pathroute view kwargs name permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>path(route, view, kwargs, name)</h3>\n<p><strong>route</strong> : URL 패턴을 가진 문자열로 Django는 urlpatterns의 첫 번째 패턴부터 시작하여, 일치하는 패턴을 찾을 때까지 요청된 URL을 각 패턴과 리스트의 순서대로 비교합니다.</p>\n<blockquote>\n<p>그렇다면 URL이 굉장히 많은 대규모 서비스라면, path의 순서를 변경해주는 것만으로도 속도 개선이 있을 수 있겠군</p>\n</blockquote>\n<p><strong>view</strong> : Django에서 일치하는 패턴을 찾으면, <strong>HttpRequest</strong> 객체를 첫 번째 인수로 하고 경로로부터 “캡쳐된” 값을 키워드 인수로 하여 특정한 view 함수를 호출합니다.</p>\n<p><strong>kwargs</strong> : 임이의 키워드 인수들은 목표한 view에 사전형으로 전달됩니다.</p>\n<p><strong>name</strong> : URL에 이름을 지으면, 템플릿에 포함한 Django 어디에서나 명확하게 참조할 수 있습니다. 그렇기에 이 기능을 사용할 경우, 단 하나의 파일만 수정해도 project 내의 모든 URL 패턴을 바꿀 수 있습니다.</p>\n<h2 id=\"django-tutorial-part-2\" style=\"position:relative;\"><a href=\"#django-tutorial-part-2\" aria-label=\"django tutorial part 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django Tutorial Part 2</h2>\n<h3 id=\"데이터-베이스-설치\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%84%A4%EC%B9%98\" aria-label=\"데이터 베이스 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 베이스 설치</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># mysite/settings.py</span>\n<span class=\"token comment\"># ...</span>\n<span class=\"token comment\"># Database</span>\n<span class=\"token comment\"># https://docs.djangoproject.com/en/3.0/ref/settings/#databases</span>\n\nDATABASES <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'default'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'ENGINE'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.db.backends.sqlite3'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'NAME'</span><span class=\"token punctuation\">:</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>BASE_DIR<span class=\"token punctuation\">,</span> <span class=\"token string\">'db.sqlite3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\"># ...</span></code></pre></div>\n<p>Django 프로젝트는 기본적으로 <strong>SQLite</strong>를 사용하도록 구성되어 있다. 만약 지정된 데이터베이스가 있다면 위에서 default 설정을 변경해주면 된다.</p>\n<ul>\n<li>ENGINE : <code class=\"language-text\">django.db.backends.sqlite3</code> 외에도 <code class=\"language-text\">postgresql</code>, <code class=\"language-text\">mysql</code>, <code class=\"language-text\">oracle</code> 등이 있다.</li>\n<li>NAME : 백엔드가 <strong>SQLite</strong>인 경우에만 <strong>NAME</strong>을 이용하며 이 외에는 <strong>USER</strong>, <strong>PASSWORD</strong>, <strong>HOST</strong> 같은 추가 설정이 반드시 필요하다.</li>\n</ul>\n<blockquote>\n<p>우선 SQLite3로 연습하고 이후에는 MySQL로 변경해서 연습해보자 !</p>\n</blockquote>\n<p>ㅤ</p>\n<p><code class=\"language-text\">mysite/settings.py</code>를 조금 더 살펴보면 <code class=\"language-text\">INSTALLED_APPS</code>에 여러 앱들이 포함되어 있는데, 명칭 그대로의 역할인 것 같아 나중에 직접 사용할 일이 있을 때 자세히 살펴보아야겠다.</p>\n<ul>\n<li>django.contrib.admin</li>\n<li>django.contrib.auth</li>\n<li>django.contrib.contenttypes</li>\n<li>django.contrib.sessions</li>\n<li>django.contrib.messages</li>\n<li>django.contrib.staticfiles</li>\n</ul>\n<p>이런 애플리케이션들 중 일부는 최소 하나 혹은 그 이상의 데이터베이스 내 테이블을 사용하는데, 그러기 위해서는 사용하도록한 데이터베이스에 테이블을 미리 만들 필요가 있고 아래 명령어를 통해 실행 가능하다.</p>\n<p>ㅤ</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python manage.py migrate\nOperations to perform:\n  Apply all migrations: admin, auth, contenttypes, sessions\nRunning migrations:\n  Applying contenttypes.0001_initial<span class=\"token punctuation\">..</span>. OK\n  Applying auth.0001_initial<span class=\"token punctuation\">..</span>. OK\n  Applying admin.0001_initial<span class=\"token punctuation\">..</span>. OK\n  Applying admin.0002_logentry_remove_auto_add<span class=\"token punctuation\">..</span>. OK\n  Applying admin.0003_logentry_add_action_flag_choices<span class=\"token punctuation\">..</span>. OK\n  Applying contenttypes.0002_remove_content_type_name<span class=\"token punctuation\">..</span>. OK\n  Applying auth.0002_alter_permission_name_max_length<span class=\"token punctuation\">..</span>. OK\n  Applying auth.0003_alter_user_email_max_length<span class=\"token punctuation\">..</span>. OK\n  Applying auth.0004_alter_user_username_opts<span class=\"token punctuation\">..</span>. OK\n  Applying auth.0005_alter_user_last_login_null<span class=\"token punctuation\">..</span>. OK\n  Applying auth.0006_require_contenttypes_0002<span class=\"token punctuation\">..</span>. OK\n  Applying auth.0007_alter_validators_add_error_messages<span class=\"token punctuation\">..</span>. OK\n  Applying auth.0008_alter_user_username_max_length<span class=\"token punctuation\">..</span>. OK\n  Applying auth.0009_alter_user_last_name_max_length<span class=\"token punctuation\">..</span>. OK\n  Applying auth.0010_alter_group_name_max_length<span class=\"token punctuation\">..</span>. OK\n  Applying auth.0011_update_proxy_permi</code></pre></div>\n<p>ㅤ</p>\n<h3 id=\"모델-만들기-및-활성화\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%8D%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0-%EB%B0%8F-%ED%99%9C%EC%84%B1%ED%99%94\" aria-label=\"모델 만들기 및 활성화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모델 만들기 및 활성화</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/models.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Question</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question_text <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n    pub_date <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateTimeField<span class=\"token punctuation\">(</span><span class=\"token string\">'date published'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Choice</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>\n    choice_text <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n    votes <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">(</span>default<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># mysite/settings.py</span>\nINSTALLED_APPS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'polls.apps.PollsConfig'</span><span class=\"token punctuation\">,</span>\t\t\t<span class=\"token comment\"># add here</span>\n    <span class=\"token string\">'django.contrib.admin'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'django.contrib.auth'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'django.contrib.contenttypes'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'django.contrib.sessions'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'django.contrib.messages'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'django.contrib.staticfiles'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>ㅤ</p>\n<p><code class=\"language-text\">polls/models.py</code>는 일반적인 <code class=\"language-text\">DB</code> 모델과 동일한 형태를 띄는 것 같다. 다만 쿼리를 이용해서 모델(테이블)을 만드는 것이 아닌 단지 코드로만 작성할 수 있다는 점이 장점으로 생각된다. 이후 <code class=\"language-text\">mysite/settings.py</code>의 <code class=\"language-text\">INSTALLED_APPS</code>에 <code class=\"language-text\">polls</code>라는 앱의 설정을 추가하여 <code class=\"language-text\">polls</code> 앱을 추가한다.</p>\n<blockquote>\n<p>INSTALLED_APPS는 처음에 라이브러리 같은 건줄 알았는데, 지금보니 django app들을 추가하고 삭제하는 것도 할 수 있어, django 프로젝트에서 새로운 app을 추가하거나 패치하기 전에 꼭 확인해야하는 코드 중 하나로 보인다.</p>\n</blockquote>\n<p>ㅤ</p>\n<p><code class=\"language-text\">makemigration</code>은 <code class=\"language-text\">migration</code>과 유사한 기능으로 보인다. <code class=\"language-text\">makemigration</code>을 실행하는 이유는 모델에 대한 변경 사실과 변경 사항을 <code class=\"language-text\">migration</code> 으로 저장하고 싶다는 것을 Django에게 알려주기 위함이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python manage.py makemigrations polls\nMigrations <span class=\"token keyword\">for</span> <span class=\"token string\">'polls'</span><span class=\"token builtin class-name\">:</span>\n  polls/migrations/0001_initial.py\n    - Create model Question\n    - Create model Choice</code></pre></div>\n<p>ㅤ</p>\n<p><code class=\"language-text\">sqlmigrate</code> 는 <code class=\"language-text\">migration</code> 이름을 인수로 받아 실행하는데, 이 때 인수는 앞서 실행한 <code class=\"language-text\">makemigrations</code>의 결과에서 리턴한 <code class=\"language-text\">0001_initial.py</code>와 연관이 높은 것으로 생각된다. 실행 결과를 살펴보면 앞서 <code class=\"language-text\">models.py</code>에 작성한 코드를 통해 DB에 테이블을 생성하는 것을 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python manage.py sqlmigrate polls 0001\nBEGIN<span class=\"token punctuation\">;</span>\n--\n-- Create model Question\n--\nCREATE TABLE <span class=\"token string\">\"polls_question\"</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">\"id\"</span> integer NOT NULL PRIMARY KEY AUTOINCREMENT,\n\t<span class=\"token string\">\"question_text\"</span> varchar<span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span> NOT NULL,\n\t<span class=\"token string\">\"pub_date\"</span> datetime NOT NULL\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n--\n-- Create model Choice\n--\nCREATE TABLE <span class=\"token string\">\"polls_choice\"</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">\"id\"</span> integer NOT NULL PRIMARY KEY AUTOINCREMENT,\n\t<span class=\"token string\">\"choice_text\"</span> varchar<span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span> NOT NULL,\n\t<span class=\"token string\">\"votes\"</span> integer NOT NULL,\n\t<span class=\"token string\">\"question_id\"</span> integer NOT NULL REFERENCES\n\t<span class=\"token string\">\"polls_question\"</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span> DEFERRABLE INITIALLY DEFERRED\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nCREATE INDEX <span class=\"token string\">\"polls_choice_question_id_c5b4b260\"</span> ON <span class=\"token string\">\"polls_choice\"</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"question_id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nCOMMIT<span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>python manage.py check 명령어를 통해 마이그레이션을 수행하거나 데이터베이스를 건들지 않고도 프로젝트의 문제를 확인할 수 있음 (like nginx -t)</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python manage.py migrate\nOperations to perform:\n  Apply all migrations: admin, auth, contenttypes, polls, sessions\nRunning migrations:\n  Applying polls.0001_initial<span class=\"token punctuation\">..</span>. OK</code></pre></div>\n<p>ㅤ</p>\n<p>과정에 대해 종합하면</p>\n<ol>\n<li><code class=\"language-text\">models.py</code>에서 모델을 변경한다.</li>\n<li><code class=\"language-text\">python manage.py makemigrations</code>를 통해 변경사항에 대한 마이그레이션을 만든다.</li>\n<li><code class=\"language-text\">python manage.py sqlmigration polls 0001</code> DB에 대한 변경사항이 있을 경우 사용 (때로는 생략)</li>\n<li><code class=\"language-text\">python manage.py migrate</code> 명령어를 통해 변경사항을 데이터베이스에 적용</li>\n</ol>\n<p>ㅤ</p>\n<p>몇 가지 모델에 메서드를 추가한 후 마지막 모델 코드</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> datetime\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> timezone\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Question</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question_text <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n    pub_date <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateTimeField<span class=\"token punctuation\">(</span><span class=\"token string\">'date published'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>question_text\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">was_published_recently</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>pub_date <span class=\"token operator\">>=</span> timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Choice</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>\n    choice_text <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n    votes <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">(</span>default<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>choice_text</code></pre></div>\n<h3 id=\"django-관리자\" style=\"position:relative;\"><a href=\"#django-%EA%B4%80%EB%A6%AC%EC%9E%90\" aria-label=\"django 관리자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django 관리자</h3>\n<blockquote>\n<p>직원들이나 고객들이 컨텐츠를 수정하기 위한 관리자 사이트를 만드는 것은 창의적일 필요없는 지루한 작업이다. 이러한 이유로 Django에서는 모델에 대한 관리용 인터페이스를 모두 자동으로 생성합니다.</p>\n</blockquote>\n<p>먼저 관리 사이트에 로그인하여 관리할 수 있는 사용자를 생성해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python manage.py createsuperuser\nUsername:\nEmail address:\nPassword:\nPassword <span class=\"token punctuation\">(</span>again<span class=\"token punctuation\">)</span>:\nSuperuser created successfully.</code></pre></div>\n<p>생성된 관리자를 <code class=\"language-text\">http://localhost:8000/admin</code> 에 접속한 후 로그인을 하면 관리 기능을 실행할 수 있다. 만약 생성된 <code class=\"language-text\">app</code> 여기서는 <code class=\"language-text\">polls app</code> 을 관리 사이트에서 변경 가능하도록 하기 위해서는 다음과 같은 작업이 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/admin.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n\nadmin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"django-tutorial-part-3\" style=\"position:relative;\"><a href=\"#django-tutorial-part-3\" aria-label=\"django tutorial part 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django Tutorial Part 3</h2>\n<blockquote>\n<p>Part3 에서는 투표(polls) 어플리케이션에 공개 인터페이인 “뷰(View)“를 추가하는 단계</p>\n</blockquote>\n<p>블로그 어플리케이션을 예로 들어 뷰를 설명하면 다음과 같은 구조를 가진다.</p>\n<blockquote>\n<p>나중에 한 번 블로그를 django로 만들어보는 것도 재밌을 것 같다. admin 계정 하나 만들고 markdown으로 글 추가 삭제 가능하도록 !</p>\n</blockquote>\n<ul>\n<li>Blog 홈페이지 - 가장 최근의 항목들을 표시</li>\n<li>항목 세부(detail) 페이지 - 하나의 항목에 연결하는 영구적인 링크(permalink)를 제공</li>\n<li>년도별/월별/날짜별 축적 페이지 - 주어진 연도/월/날짜의 모든 월별/날짜별 항목들을 표시</li>\n<li>댓글 기능 - 특정 항목에 댓글을 다룰 수 있는 기능</li>\n</ul>\n<p>ㅤ</p>\n<p>우리가 만들고자하는 투표(polls) 어플리케이션의 뷰는 어떻게 구성될까</p>\n<ul>\n<li>질문 “색인” 페이지 - 최근의 질문들을 표시</li>\n<li>질문 “세부” 페이지 - 질문 내용과 투표할 수 있는 서식을 표시</li>\n<li>질문 “결과” 페이지 - 특정 질문에 대한 결과를 표시</li>\n<li>투표 기능 - 특정 질문에 대해 선택할 수 있는 투표 기능을 제공</li>\n</ul>\n<p>ㅤ</p>\n<h2 id=\"뷰-추가하기\" style=\"position:relative;\"><a href=\"#%EB%B7%B0-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"뷰 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뷰 추가하기</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/views.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello, world. You're at the polls index.\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">detail</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> question_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"You're looking at question %s.\"</span> <span class=\"token operator\">%</span> question_id<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">results</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> question_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    response <span class=\"token operator\">=</span> <span class=\"token string\">\"You're looking at the results of question %s.\"</span>\n    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>response <span class=\"token operator\">%</span> question_id<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">vote</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> question_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"You're voting on question %s.\"</span> <span class=\"token operator\">%</span> question_id<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/urls.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path\n\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views\n\nurlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\"># ex: /polls/</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ex: /polls/5/</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;int:question_id>/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>detail<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'detail'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ex: /polls/5/results/</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;int:question_id>/results/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'results'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\"># ex: /polls/5/vote/</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;int:question_id>/vote/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>vote<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'vote'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>ㅤ</p>\n<p>이 과정을 따라하면서 나는 <code class=\"language-text\">urlpatterns</code>에 <code class=\"language-text\">example</code>을 작성해놓은 것이 정말로 따라하면 좋을 코드라고 생각했다. 왜냐하면 나도 간혹 <code class=\"language-text\">flask</code>를 사용하다가 <code class=\"language-text\">app.route</code> 에 위와 같은 형태로 작성해놓더라도 코드를 다시 보고 기억하는데, 저렇게 작성되어있다면 <code class=\"language-text\">ex</code>만 보고 이해하면 되니 좋은 것 같다.</p>\n<p><code class=\"language-text\">views.py</code>에는 앞서 뷰에 무엇이 있을 것이라고 가정한 뷰 리스트를 그대로 작성했고, 리턴 값은 <code class=\"language-text\">HttpResponse</code>에 <code class=\"language-text\">text</code>를 리턴한다. 어찌보면 이 방법은 좋은 방법이라 생각한다. 먼저 어떠한 뷰가 나올지 계획한 후에 계획에 맞춰 뷰를 만들어놓으면 추후에 코드를 작성하더라도 위나 아래에 코드를 보고 맞춰서 개발하기에 편의성이 높다고 생각한다.</p>\n<p>ㅤ</p>\n<h3 id=\"뷰가-실제로-무언가-하도록-만들기\" style=\"position:relative;\"><a href=\"#%EB%B7%B0%EA%B0%80-%EC%8B%A4%EC%A0%9C%EB%A1%9C-%EB%AC%B4%EC%96%B8%EA%B0%80-%ED%95%98%EB%8F%84%EB%A1%9D-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"뷰가 실제로 무언가 하도록 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뷰가 실제로 무언가 하도록 만들기</h3>\n<p>위에서 작성한 <code class=\"language-text\">views.py</code>는 어떠한 행동으로 인한 결과를 보여주기보다는 특정 페이지가 잘 보여지고 있는지에 대한 간략한 테스트로 작성한 코드라고 보면 된다. 뷰는 두 가지 중 하나를 하도록 되어 있다. 요청된 페이지의 내용이 담긴 <code class=\"language-text\">HttpResponse</code> 객체를 반환하거나, 혹은 <code class=\"language-text\">Http404</code> 같은 예외를 발생하게 해야한다. (404 : Not Found)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/views.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    latest_question_list <span class=\"token operator\">=</span> Question<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'-pub_date'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span>\n    output <span class=\"token operator\">=</span> <span class=\"token string\">', '</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>q<span class=\"token punctuation\">.</span>question_text <span class=\"token keyword\">for</span> q <span class=\"token keyword\">in</span> latest_question_list<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>output<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#...</span></code></pre></div>\n<p>ㅤ</p>\n<p>위 코드는 예시이다. 만약에 위와 같이 뷰 함수를 짠다면 어떻게 될까? 답은 간단한데 그저 텍스트로 질문들만 쉼표와 함께 나열될 것이고 어떠한 아름다운 화면도 어떠한 디자인도 볼 수 가 없을 것이다. 그래서 <code class=\"language-text\">templates</code> 라는 디렉토리를 만들어 Django는 사용자의 요청에 따라 템플릿을 찾아 화면에 보여주게 될 것이다.</p>\n<blockquote>\n<p>📌 템플릿 네임스페이싱</p>\n<p>예를 들어 index.html 이라는 템플릿이 있다고 보면, 이 index.html은 굉장히 어디서나 많이 사용되는 템플릿 중 하나로 특정 앱에 대부분 상관없이 메인 화면에서 사용된다고 볼 수 있는데, 만약에 index.html을 하나의 디렉토리에 저장하여 불러온다면 어떻게 될까? 그리고 여러 어플리케이션들이 존재하고 각 어플리케이션마다 index.html을 호출한다면 어떻게해야할까? 라는 질문에 답을 생각해보는 것이 좋다고 생각한다.</p>\n</blockquote>\n<p>ㅤ</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"># polls/templates/polls/index.html {% if latest_question_list %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span>\n  {% for question in latest_question_list %}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/polls/{{ question.id }}/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ question.question_text }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  {% endfor %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n{% else %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>No polls are available.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n{% endif %}</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/views.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>template <span class=\"token keyword\">import</span> loader\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    latest_question_list <span class=\"token operator\">=</span> Question<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'-pub_date'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span>\n    template <span class=\"token operator\">=</span> loader<span class=\"token punctuation\">.</span>get_template<span class=\"token punctuation\">(</span><span class=\"token string\">'polls/index.html'</span><span class=\"token punctuation\">)</span>\n    context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'latest_question_list'</span><span class=\"token punctuation\">:</span> latest_question_list<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>template<span class=\"token punctuation\">.</span>render<span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># ...</span></code></pre></div>\n<p>먼저 <code class=\"language-text\">Question Model</code>에서 <code class=\"language-text\">pub_date</code>를 기준으로 내림차순된 데이터를 5개 가져와 <code class=\"language-text\">latest_question_list</code>에 넣는다. 이후 템플릿을 <code class=\"language-text\">loader</code>을 이용해 가져오고,<code class=\"language-text\">context</code>라는 변수에 템플렛에서 사용한 변수명과 일치시켜 저장한다. 이렇게 저장된 <code class=\"language-text\">context</code>를 템플릿과 함께 <code class=\"language-text\">render</code>한 결과를 <code class=\"language-text\">return</code> 한다.</p>\n<p>ㅤ</p>\n<h3 id=\"지름길--render\" style=\"position:relative;\"><a href=\"#%EC%A7%80%EB%A6%84%EA%B8%B8--render\" aria-label=\"지름길  render permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>지름길 : render()</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> render\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    latest_question_list <span class=\"token operator\">=</span> Question<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'-pub_date'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span>\n    context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'latest_question_list'</span><span class=\"token punctuation\">:</span> latest_question_list<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'polls/index.html'</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ㅤ</p>\n<p>ㅤ</p>\n<h2 id=\"404-에러-일으키기\" style=\"position:relative;\"><a href=\"#404-%EC%97%90%EB%9F%AC-%EC%9D%BC%EC%9C%BC%ED%82%A4%EA%B8%B0\" aria-label=\"404 에러 일으키기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>404 에러 일으키기</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse<span class=\"token punctuation\">,</span> Http404\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>template <span class=\"token keyword\">import</span> loader\n\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n<span class=\"token comment\"># ...</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">detail</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> question_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        question <span class=\"token operator\">=</span> Question<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span>question_id<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">raise</span> Http404<span class=\"token punctuation\">(</span><span class=\"token string\">\"Question does not exist\"</span><span class=\"token punctuation\">)</span>\n\n    template <span class=\"token operator\">=</span> loader<span class=\"token punctuation\">.</span>get_template<span class=\"token punctuation\">(</span><span class=\"token string\">'polls/detail.html'</span><span class=\"token punctuation\">)</span>\n    context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'question'</span><span class=\"token punctuation\">:</span> question<span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> HttpResponse<span class=\"token punctuation\">(</span>template<span class=\"token punctuation\">.</span>render<span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"># polls/templates/polls/detail.html {{ question }}</code></pre></div>\n<p>ㅤ</p>\n<h3 id=\"지름길--getobjector_404\" style=\"position:relative;\"><a href=\"#%EC%A7%80%EB%A6%84%EA%B8%B8--getobjector_404\" aria-label=\"지름길  getobjector_404 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>지름길 : get<em>object</em>or_404()</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> get_object_or_404<span class=\"token punctuation\">,</span> render\n\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n<span class=\"token comment\"># ...</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">detail</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> question_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question <span class=\"token operator\">=</span> get_object_or_404<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> pk<span class=\"token operator\">=</span>question_id<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'polls/detail.html'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'question'</span><span class=\"token punctuation\">:</span> question<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">get_object_or_404(model, kwargs)</code> 함수는 모델을 첫 번째 인수로 받아 몇 개의 키워드 인수를 모델 관리자의 <code class=\"language-text\">Object.get</code> 함수에 넘기는데, 만약 존재하지 않을 경우, <code class=\"language-text\">Http404</code> 예외가 발생한다.</p>\n<blockquote>\n<p><code class=\"language-text\">get_object_or_404</code> 외에도 <code class=\"language-text\">get_list_or_404</code> 도 있어, 만약 object가 아닌 list 형태의 결과일 경우에 사용할 수 있으며, 리스트가 비어 있을 경우에 <code class=\"language-text\">Http404</code> 예외를 발생시킨다.</p>\n</blockquote>\n<p>ㅤ</p>\n<p>ㅤ</p>\n<h2 id=\"템플릿-시스템-이용하기\" style=\"position:relative;\"><a href=\"#%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"템플릿 시스템 이용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>템플릿 시스템 이용하기</h2>\n<p>직전에 <code class=\"language-text\">detail.html</code>에는 간단하게 <code class=\"language-text\">{{ question }}</code> 만 화면에 보여주는 형식으로 질문만 보여주었는데, 아래는 반복문을 사용하여 <code class=\"language-text\">Question</code> 이외에도 선택지의 목록을 보여줄 수 있게 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>{{ question.question_text }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span>\n  {% for choice in question.choice_set.all %}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>{{ choice.choice_text }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  {% endfor %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>템플릿 시스템은 변수의 속성에 접근하기 위해 점-탐색(dot-lookup) 문법을 사용한다. 예제의 <code class=\"language-text\">{{ question.question_text }}</code> 구문을 보면, 먼저 <code class=\"language-text\">question</code> 객체에 대해 사전형으로 탐색하고 만약 실패하게 되면 속성 값을 탐색한다. 여기서도 실패하면 리스트의 인덱스 탐색을 시도한다. 아래 순서로 탐색한다.</p>\n<ol>\n<li><code class=\"language-text\">question.question_text</code></li>\n<li>\n<p><code class=\"language-text\">question.choice_set.all</code></p>\n<ul>\n<li><code class=\"language-text\">choice.choice_text</code></li>\n</ul>\n</li>\n</ol>\n<p>ㅤ</p>\n<h2 id=\"템플릿에서-하드-코딩된-url-제거하기\" style=\"position:relative;\"><a href=\"#%ED%85%9C%ED%94%8C%EB%A6%BF%EC%97%90%EC%84%9C-%ED%95%98%EB%93%9C-%EC%BD%94%EB%94%A9%EB%90%9C-url-%EC%A0%9C%EA%B1%B0%ED%95%98%EA%B8%B0\" aria-label=\"템플릿에서 하드 코딩된 url 제거하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>템플릿에서 하드 코딩된 URL 제거하기</h2>\n<p><code class=\"language-text\">polls/iindex.html</code> 템플릿에 링크를 적으면, 다음과 같이 부분적으로 하드코딩된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/polls/{{ question.id }}/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ question.question_text }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>위 템플릿은 index.html에서 질문을 선택하게 되면 해당 질문의 디테일로 링크되어 이동하는데, 아래처럼 작성시 하드코딩되어 URL을 바꾸는게 어려운 일이 될 수 있다. 그래서 뷰에 종속되게 변경할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{% url <span class=\"token punctuation\">'</span>detail<span class=\"token punctuation\">'</span> question.id %}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ question.question_text }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>여기서 <code class=\"language-text\">url &#39;detail&#39;</code> 은 <code class=\"language-text\">urls.py</code> 에 작성한 <code class=\"language-text\">name</code>에 영향을 받는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># the 'name' value as called by the {% url %} template tag</span>\npath<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;int:question_id>/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>detail<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'detail'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ㅤ</p>\n<h2 id=\"url의-namespace-정하기\" style=\"position:relative;\"><a href=\"#url%EC%9D%98-namespace-%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"url의 namespace 정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>URL의 Namespace 정하기</h2>\n<p>튜토리얼 프로젝트의 <code class=\"language-text\">polls</code>라는 앱 하나만 가지고 진행했는데, 실제 프로젝트는 앱이 몇개라도 올 수 있는데, 그럼 Django는 어떻게 이 앱들의 URL을 구별해낼까? <code class=\"language-text\">polls</code> 앱은 <code class=\"language-text\">detail</code>이라는 뷰를 가지고 있고, 동일한 뷰를 가지는 다른 앱이 존재할 수 있는데도 말이다. Django가 <code class=\"language-{\"> url </code> 템플릿 태그를 사용할 때, 어떤 앱의 뷰에서 URL을 생성할지 알 수 있을까?</p>\n<blockquote>\n<p>이 부분과 연관된 내용을 앞서서 생각해본 적이 있다. 위 예시에서는 detail을 예로 들었지만, 실제로 index가 될수도 있고 여러가지 케이스가 있다. 그렇다고 &#x3C;app<em>name>\\</em>index로 뷰를 만들진 않을테니!</p>\n</blockquote>\n<p>해결 방법은 URLconf에 이름 공간 (namespace) 을 추가하는 것으로 <code class=\"language-text\">polls/urls.py</code> 파일에 <code class=\"language-text\">app_name</code>을 추가하여 애플리케이션의 이름 공간을 설정할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path\n\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views\n\n<span class=\"token comment\"># app_name 별도의 라이브러리가 필요하지 않다.</span>\napp_name <span class=\"token operator\">=</span> <span class=\"token string\">'polls'</span>\nurlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;int:question_id>/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>detail<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'detail'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;int:question_id>/results/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'results'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;int:question_id>/vote/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>vote<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'vote'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{% url <span class=\"token punctuation\">'</span>polls:detail<span class=\"token punctuation\">'</span> question.id %}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ question.question_text }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"django-tutorial-part-4\" style=\"position:relative;\"><a href=\"#django-tutorial-part-4\" aria-label=\"django tutorial part 4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django Tutorial Part 4</h2>\n<h2 id=\"write-a-minimal-form\" style=\"position:relative;\"><a href=\"#write-a-minimal-form\" aria-label=\"write a minimal form permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Write a minimal form</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- polls/templates/polls/detail.html --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>{{ question.question_text }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n\n{% if error_message %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">></span></span>{{ error_message }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n{% endif %}\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{% url <span class=\"token punctuation\">'</span>polls:vote<span class=\"token punctuation\">'</span> question.id %}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  {% csrf_token %} {% for choice in question.choice_set.all %}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>choice<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>choice{{ forloop.counter }}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ choice.id }}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>choice{{ forloop.counter }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ choice.choice_text }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>ㅤ {% endfor %}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Vote<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">polls/detail.html</code> 템플릿은 간략하게 설명하면,</p>\n<ul>\n<li>\n<p>질문 안 선택 항목에 대한 라디오 버튼을 표시한다.</p>\n<ul>\n<li>각 라디오 버튼의 <code class=\"language-text\">value</code>는 연관된 질문 선택 항목의 <code class=\"language-text\">ID</code>다.</li>\n<li>각 라디오 버튼의 <code class=\"language-text\">name</code>은 <code class=\"language-text\">choice</code> 입니다.</li>\n<li>누군가가 라디오 버튼 중 하나를 선택하여 폼을 제출하면, POST 데이터인 <code class=\"language-text\">choice=#</code>을 보낸다.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-<form action=\"{\"> url &#39;polls:vote&#39; question.id </code></p>\n<ul>\n<li>라디오 버튼에서 선택 항목에 대해 <code class=\"language-text\">choice=#</code>을 파라미터로하여 <code class=\"language-text\">action</code>에 작성되어 있는 <code class=\"language-text\">polls:vote</code>에 <code class=\"language-text\">POST</code>로 전달한다.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">forloop.count</code>는 <code class=\"language-text\">for</code> 태그가 반복을 한 횟수</li>\n<li>\n<p><code class=\"language-{\"> csrf_token </code></p>\n<ul>\n<li>사이트 간 요청 위조를 방지하기 위해 사용된다.</li>\n<li>되도록 모든 <code class=\"language-text\">POST</code> 양식에 위 템플릿 태그를 사용해야한다.</li>\n</ul>\n</li>\n</ul>\n<p>ㅤ</p>\n<h3 id=\"vote-함수-작성\" style=\"position:relative;\"><a href=\"#vote-%ED%95%A8%EC%88%98-%EC%9E%91%EC%84%B1\" aria-label=\"vote 함수 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>vote() 함수 작성</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/views.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponse<span class=\"token punctuation\">,</span> HttpResponseRedirect\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> get_object_or_404<span class=\"token punctuation\">,</span> render\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> reverse\n\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Choice<span class=\"token punctuation\">,</span> Question\n<span class=\"token comment\"># ...</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">vote</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> question_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question <span class=\"token operator\">=</span> get_object_or_404<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> pk<span class=\"token operator\">=</span>question_id<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        selected_choice <span class=\"token operator\">=</span> question<span class=\"token punctuation\">.</span>choice_set<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span>request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">[</span><span class=\"token string\">'choice'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> <span class=\"token punctuation\">(</span>KeyError<span class=\"token punctuation\">,</span> Choice<span class=\"token punctuation\">.</span>DoesNotExist<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># Redisplay the question voting form.</span>\n        <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'polls/detail.html'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">'question'</span><span class=\"token punctuation\">:</span> question<span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'error_message'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"You didn't select a choice.\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        selected_choice<span class=\"token punctuation\">.</span>votes <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n        selected_choice<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># Always return an HttpResponseRedirect after successfully dealing</span>\n        <span class=\"token comment\"># with POST data. This prevents data from being posted twice if a</span>\n        <span class=\"token comment\"># user hits the Back button.</span>\n        <span class=\"token keyword\">return</span> HttpResponseRedirect<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'polls:results'</span><span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>question<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">request.POST[&#39;choice&#39;]</code> 는 라디오 버튼에서 보냈던 <code class=\"language-text\">POST</code> 값 중 <code class=\"language-text\">choice</code>에 입력된 값을 가져오는 객체로 사전(dict)와 같은 객체이다. (<code class=\"language-text\">flask request.form.get</code>과 동일한 기능으로 보인다.)</p>\n<ul>\n<li>Django는 같은 방법으로 <code class=\"language-text\">request.GET</code>을 제공하지만 <code class=\"language-text\">POST</code> 요청을 통해서만 값이 수정되게 하기 위해서 명시적으로 코드에 <code class=\"language-text\">request.POST</code>를 사용함 (결론, 여기에서는 <code class=\"language-text\">POST</code> 요청 맞기 때문에 <code class=\"language-text\">POST</code>로 받음)</li>\n<li>만약 <code class=\"language-text\">POST</code>에 <code class=\"language-text\">choice</code>가 없으면 <code class=\"language-text\">KeyError</code>가 발생하고, 만약 <code class=\"language-text\">Choice</code>가 있더라도 질문에 선택지가 없다면 <code class=\"language-text\">Choice.DoesNotExist</code> 에러가 발생한다.</li>\n</ul>\n</li>\n<li>\n<p>설문지의 수가 증가한 경우 <code class=\"language-text\">HttpResponse</code>가 아닌 <code class=\"language-text\">HttpResponseRedirect()</code>를 사용했는데 그 이유는 <code class=\"language-text\">form POST</code> 요청이 성공 했기 때문인데, 사용자의 요청이 성공되면 다른 페이지를 그대로 리턴하기 보다는 성공한 결과를 토대로 다른 페이지를 리다이렉트 하는 방식으로 가야하기 때문이다(?)</p>\n<ul>\n<li><code class=\"language-text\">HttpResponseRedirect</code> 생성자 안에서 <code class=\"language-text\">reverse()</code> 함수를 사용하고 있다. 이 함수는 뷰 함수에서 URL을 하드코딩하지 않도록 도와주는데, 제어를 전달하기 원하는 뷰의 이름을 그리고 <code class=\"language-text\">args</code> 를 전달해서 주면 해당 뷰의 전달하여 <code class=\"language-text\">return</code>한다.</li>\n</ul>\n</li>\n</ul>\n<p>ㅤ</p>\n<h3 id=\"results-뷰-만들기\" style=\"position:relative;\"><a href=\"#results-%EB%B7%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"results 뷰 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Results 뷰 만들기</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/views.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> get_object_or_404<span class=\"token punctuation\">,</span> render\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">results</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> question_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question <span class=\"token operator\">=</span> get_object_or_404<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> pk<span class=\"token operator\">=</span>question_id<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'polls/results.html'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'question'</span><span class=\"token punctuation\">:</span> question<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- polls/templates/polls/results.html --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>{{ question.question_text }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span>\n  {% for choice in question.choice_set.all %}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>{{ choice.choice_text }} -- {{ choice.votes }} vote{{ choice.votes|pluralize }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  {% endfor %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{% url <span class=\"token punctuation\">'</span>polls:detail<span class=\"token punctuation\">'</span> question.id %}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Vote again?<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>ㅤ</p>\n<h2 id=\"제너릭-뷰-사용하기--적은-코드가-더-좋습니다\" style=\"position:relative;\"><a href=\"#%EC%A0%9C%EB%84%88%EB%A6%AD-%EB%B7%B0-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0--%EC%A0%81%EC%9D%80-%EC%BD%94%EB%93%9C%EA%B0%80-%EB%8D%94-%EC%A2%8B%EC%8A%B5%EB%8B%88%EB%8B%A4\" aria-label=\"제너릭 뷰 사용하기  적은 코드가 더 좋습니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>제너릭 뷰 사용하기 : 적은 코드가 더 좋습니다.</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/views.py</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">detail</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> question_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question <span class=\"token operator\">=</span> get_object_or_404<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> pk<span class=\"token operator\">=</span>question_id<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'polls/detail.html'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'question'</span><span class=\"token punctuation\">:</span> question<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">results</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> question_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question <span class=\"token operator\">=</span> get_object_or_404<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> pk<span class=\"token operator\">=</span>question_id<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'polls/results.html'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'question'</span><span class=\"token punctuation\">:</span> question<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>실제로 <code class=\"language-text\">views.py</code>에서 <code class=\"language-text\">detail()</code> 과 <code class=\"language-text\">results()</code>는 코드가 비교적 적게 쓰였는데, 이렇게 <code class=\"language-text\">views.py</code>는 되도록이면 적은 코드가 좋다. 하지만, 이러한 뷰는 URL에서 전달 된 매개 변수에 따라 데이터베이스에서 데이터를 가져 오는 것과 템플릿을 로드하고 렌더링 된 템블릿을 리턴하는 일반적인 경우인데, 이러한 일반적인 경우 Django는 ”<strong>제너릭 뷰</strong>” 를 제공한다.</p>\n<p>제너릭 뷰는 일반적인 패턴을 추상화하여 앱을 작성하기 위해 Python 코드를 작성하지 않아도 된다. 제너릭 뷰 변환 순서는 다음과 같다.</p>\n<ol>\n<li>URLconf를 수정한다.</li>\n<li>불필요한 오래된 보기 중 일부를 삭제</li>\n<li>Django의 제너릭 뷰를 기반으로 새로운 뷰를 도입</li>\n</ol>\n<p>ㅤ</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/urls.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path\n\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> views\n\napp_name <span class=\"token operator\">=</span> <span class=\"token string\">'polls'</span>\nurlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>IndexView<span class=\"token punctuation\">.</span>as_view<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;int:pk>/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>DetailView<span class=\"token punctuation\">.</span>as_view<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'detail'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;int:pk>/results/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>ResultsView<span class=\"token punctuation\">.</span>as_view<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'results'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;int:question_id>/vote/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>vote<span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">'vote'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p><code class=\"language-text\">urls.py</code>는 크게 바뀐 것이 없다. <code class=\"language-text\">&lt;int:question_id&gt;</code> 에서 <code class=\"language-text\">&lt;int:pk&gt;</code>로 바뀐 것 뿐이다.</p>\n<p>ㅤ</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/views.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>http <span class=\"token keyword\">import</span> HttpResponseRedirect\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>shortcuts <span class=\"token keyword\">import</span> get_object_or_404<span class=\"token punctuation\">,</span> render\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> reverse\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>views <span class=\"token keyword\">import</span> generic\n\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Choice<span class=\"token punctuation\">,</span> Question\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">IndexView</span><span class=\"token punctuation\">(</span>generic<span class=\"token punctuation\">.</span>ListView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    template_name <span class=\"token operator\">=</span> <span class=\"token string\">'polls/index.html'</span>\n    context_object_name <span class=\"token operator\">=</span> <span class=\"token string\">'latest_question_list'</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_queryset</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"Return the last five published questions.\"\"\"</span>\n        <span class=\"token keyword\">return</span> Question<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'-pub_date'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DetailView</span><span class=\"token punctuation\">(</span>generic<span class=\"token punctuation\">.</span>DetailView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    model <span class=\"token operator\">=</span> Question\n    template_name <span class=\"token operator\">=</span> <span class=\"token string\">'polls/detail.html'</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ResultsView</span><span class=\"token punctuation\">(</span>generic<span class=\"token punctuation\">.</span>DetailView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    model <span class=\"token operator\">=</span> Question\n    template_name <span class=\"token operator\">=</span> <span class=\"token string\">'polls/results.html'</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">vote</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> question_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token comment\"># same as above, no changes needed.</span></code></pre></div>\n<p><code class=\"language-text\">ListView</code>와 <code class=\"language-text\">DetailView</code>의 두 가지 제너릭 뷰를 사용하고 있다.</p>\n<ul>\n<li><code class=\"language-text\">ListView</code> : 개체 목록 표시</li>\n<li><code class=\"language-text\">DetailView</code> : 특정 개체 유형에 대한 세부 정보 페이지 표</li>\n</ul>\n<p>각 제너릭 뷰는 어떤 모델이 적용될 것인지 알아야하는데, 이것은 <code class=\"language-text\">Model</code> 속성에 영향을 받는다. <code class=\"language-text\">DetailView</code> 제너릭 뷰는 URL에서 캡쳐된 기본 키 값이 <code class=\"language-text\">pk</code>라고 기대한다. 그렇기 때문에 <code class=\"language-text\">question_id</code>에서 <code class=\"language-text\">pk</code>로 변경되었다.</p>\n<ul>\n<li>\n<p>나중에 보면 좋을 것 같은 내용</p>\n<ul>\n<li>CBV (Class-based View) vs FBV (Function-based View)</li>\n<li><a href=\"https://docs.djangoproject.com/ko/3.0/topics/class-based-views/\">Django CBV - 제너릭뷰</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"django-tutorial-part-5\" style=\"position:relative;\"><a href=\"#django-tutorial-part-5\" aria-label=\"django tutorial part 5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django Tutorial Part 5</h2>\n<h2 id=\"자동화된-테스트-소개\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EB%8F%99%ED%99%94%EB%90%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%86%8C%EA%B0%9C\" aria-label=\"자동화된 테스트 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자동화된 테스트 소개</h2>\n<p>테스트는 다양한 수준에서 작동하는데, 여기서 수준이란 아주 작은 세부 사항일수도 있고 가장 큰 범위의 사항일수도 있다는 뜻으로 이해하면 된다. 이렇듯 테스트는 작은 세부 사항에 적용한다면 “특정 모델 메서드가 예상된 값을 반환하는지 여부라던지” 같은 수준에 사용될 수 있고 또 다른 테스트는 소프트웨어의 전반적인 작동을 테스트할 수도 있다. 예를 들어 웹사이트 내에서 사용자의 입력 결과가 과정에 맞춰 원하는 결과를 생성하는지 등을 말한다.</p>\n<p>Django Tutorial 중 Part2 에서 사용한 것과 마찬가지로 <code class=\"language-text\">django-admin shell</code> 을 이용한 것도 데이터의 입력을 테스트한 것과 마찬가지이다. 테스트 자동화는 시스템에서 수행되는데, 한 번 테스트 세트를 작성한 이후에는 앱을 변경할 때마다 수동으로 테스트를 수행하지 않아도 원래 의도대로 즉 기존에 작상한 테스트 세트에 의해 코드가 작동되는지 확인할 수 있다.</p>\n<p>ㅤ</p>\n<h2 id=\"테스트를-만들어야하는-이유\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%95%BC%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"테스트를 만들어야하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테스트를 만들어야하는 이유</h2>\n<p>지금까지 튜토리얼을 따라서 작성해본 <code class=\"language-text\">polls</code> 어플리케이션은 가시적으로 보더라도 꽤 잘 돌아가고 있고, 충분히 잘 돌아가고 있기 때문에 굳이 하나하나 따져가면서 테스트를 만드는 것이 어플리케이션을 기존보다 더 잘 돌아가거나 더 좋게 하지는 않기 때문에 어떻게보면 테스트가 굳이? 필요 없다고 여길 수 있다. 하지만, 현재 상태의 <code class=\"language-text\">polls</code> 어플리케이션은 아직 미완성의 단계이고 더 많은 작업이 필요한 상황이기 때문에 테스트를 작성한다면, 추후의 작업이 있더라도 기존의 결과물과 동일하게 잘 돌아갈 것이고 만약 문제가 생긴다면 바로 알아차릴 수 있을 것이다. (이렇듯 완전히 완성된 제품의 경우에는 테스트가 필요 없을지 몰라도, 개발 중이거나 앞으로도 개발해야하는 제품일 경우에는 테스트는 불가피하고 이를 편리하게 하기 위해서는 자동화된 테스트가 필요하다.)</p>\n<p>ㅤ</p>\n<h3 id=\"테스트의-장점\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%9D%98-%EC%9E%A5%EC%A0%90\" aria-label=\"테스트의 장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테스트의 장점</h3>\n<ul>\n<li>테스트를 통해 시간을 절약 할 수 있다.</li>\n<li>테스트는 문제를 그저 식별하는 것이 아니라 예방 단계이다.</li>\n<li>테스트가 코드를 더 매력적으로 만든다.</li>\n<li>테스트는 팀이 함께 일하는 것을 돕는다.</li>\n</ul>\n<p>ㅤ</p>\n<p>ㅤ</p>\n<h2 id=\"첫-번째-테스트-작성하기\" style=\"position:relative;\"><a href=\"#%EC%B2%AB-%EB%B2%88%EC%A7%B8-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"첫 번째 테스트 작성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>첫 번째 테스트 작성하기</h2>\n<p>테스트 작성에는 많은 접근법이 존재하는데, <a href=\"https://en.wikipedia.org/wiki/Test-driven_development\">TDD</a>를 참고하자</p>\n<h3 id=\"버그-식별하기\" style=\"position:relative;\"><a href=\"#%EB%B2%84%EA%B7%B8-%EC%8B%9D%EB%B3%84%ED%95%98%EA%B8%B0\" aria-label=\"버그 식별하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>버그 식별하기</h3>\n<p><code class=\"language-text\">polls</code> 어플리케이션에는 바로 해결할 수 있는 약간의 버그가 있다. 바로 <code class=\"language-text\">Question.was_published_recently()</code> 메서드로 <code class=\"language-text\">Question</code>이 어제 게시된 경우 <code class=\"language-text\">True</code>를 반환하지만, <code class=\"language-text\">Question</code>의 <code class=\"language-text\">pub_date</code> 필드가 미래로 설정되어 있을 때도 그렇다. (음?) 여기서 바로 알아차려야하는데, 미래는 어제보다 다음이긴 하지만, 최근은 아니기 때문에 <code class=\"language-text\">False</code>를 반환하는 것이 옳다.</p>\n<p>ㅤ</p>\n<h3 id=\"버그를-노출하는-테스트-만들기\" style=\"position:relative;\"><a href=\"#%EB%B2%84%EA%B7%B8%EB%A5%BC-%EB%85%B8%EC%B6%9C%ED%95%98%EB%8A%94-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"버그를 노출하는 테스트 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>버그를 노출하는 테스트 만들기</h3>\n<blockquote>\n<p>여기서 나는 Django의 좋은 점을 느낀게, <code class=\"language-text\">tests.py</code>가 이미 만들어져있다. 👍</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/tests.py</span>\n<span class=\"token keyword\">import</span> datetime\n\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>test <span class=\"token keyword\">import</span> TestCase\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> timezone\n\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionModelTests</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_was_published_recently_with_future_question</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        was_published_recently() returns False for questions whose pub_date\n        is in the future.\n        \"\"\"</span>\n        time <span class=\"token operator\">=</span> timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n        future_question <span class=\"token operator\">=</span> Question<span class=\"token punctuation\">(</span>pub_date<span class=\"token operator\">=</span>time<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertIs<span class=\"token punctuation\">(</span>future_question<span class=\"token punctuation\">.</span>was_published_recently<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ㅤ</p>\n<h3 id=\"테스트-실행\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%8B%A4%ED%96%89\" aria-label=\"테스트 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테스트 실행</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python manage.py <span class=\"token builtin class-name\">test</span> polls\nCreating <span class=\"token builtin class-name\">test</span> database <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">alias</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">..</span>.\nSystem check identified no issues <span class=\"token punctuation\">(</span><span class=\"token number\">0</span> silenced<span class=\"token punctuation\">)</span>.\nF\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_was_published_recently_with_future_question <span class=\"token punctuation\">(</span>polls.tests.QuestionModelTests<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"/mysite/polls/tests.py\"</span>, line <span class=\"token number\">18</span>, <span class=\"token keyword\">in</span> test_was_published_recently_with_future_question\n    self.assertIs<span class=\"token punctuation\">(</span>future_question.was_published_recently<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>, False<span class=\"token punctuation\">)</span>\nAssertionError: True is not False\n\n----------------------------------------------------------------------\nRan <span class=\"token number\">1</span> <span class=\"token builtin class-name\">test</span> <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.001s\n\nFAILED <span class=\"token punctuation\">(</span>failures<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nDestroying <span class=\"token builtin class-name\">test</span> database <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">alias</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">..</span>.</code></pre></div>\n<p>결과는 예상한 대로 <code class=\"language-text\">FAILED (failures=1)</code> 로 테스트 케이스 1건 중 1개가 <code class=\"language-text\">F</code>로 나왔다.</p>\n<p>그럼 어떤 과정으로 실행된 것일까?</p>\n<ol>\n<li><code class=\"language-text\">manage.py test polls</code>는 <code class=\"language-text\">polls</code> 어플리케이션에서 테스트를 탐색</li>\n<li><code class=\"language-text\">django.test.TestCase</code> 클래스의 서브 클래스를 찾는다.</li>\n<li>테스트 목적의 데이터베이스 생성</li>\n<li>이름이 <code class=\"language-text\">test</code>로 시작하는 테스트 메서드 탐색 (ex, test<em>was</em>published<em>recently</em>with<em>future</em>question)</li>\n<li><code class=\"language-text\">assertIs()</code> 메서드를 이용하여 <code class=\"language-text\">False</code>와 <code class=\"language-text\">future_question.was_published_recently()</code>의 반환값이 서로 같은지 확인한다.</li>\n</ol>\n<p>ㅤ</p>\n<h3 id=\"버그-수정\" style=\"position:relative;\"><a href=\"#%EB%B2%84%EA%B7%B8-%EC%88%98%EC%A0%95\" aria-label=\"버그 수정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>버그 수정</h3>\n<p>무엇이 문제인지 알았으니 버그를 수정하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/models.py</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Question</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question_text <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n    pub_date <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateTimeField<span class=\"token punctuation\">(</span><span class=\"token string\">'date published'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>question_text\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">was_published_recently</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        now <span class=\"token operator\">=</span> timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> now <span class=\"token operator\">-</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> self<span class=\"token punctuation\">.</span>pub_date <span class=\"token operator\">&lt;=</span> now</code></pre></div>\n<p>ㅤ</p>\n<p>다시 테스트 실행</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python manage.py <span class=\"token builtin class-name\">test</span> polls\nCreating <span class=\"token builtin class-name\">test</span> database <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">alias</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">..</span>.\nSystem check identified no issues <span class=\"token punctuation\">(</span><span class=\"token number\">0</span> silenced<span class=\"token punctuation\">)</span>.\n<span class=\"token builtin class-name\">.</span>\n----------------------------------------------------------------------\nRan <span class=\"token number\">1</span> <span class=\"token builtin class-name\">test</span> <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.001s\n\nOK\nDestroying <span class=\"token builtin class-name\">test</span> database <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">alias</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">..</span>.</code></pre></div>\n<p>이처럼 테스트까지 완료되면 수정이 완료된 것이다. 하지만, 테스트 케이스가 여전히 빈약하니 과거, 최근, 미래를 테스트 케이스로 추가 작성</p>\n<p>ㅤ</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionModelTests</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_was_published_recently_with_old_question</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        time <span class=\"token operator\">=</span> timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> seconds<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        future_question <span class=\"token operator\">=</span> Question<span class=\"token punctuation\">(</span>pub_date<span class=\"token operator\">=</span>time<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertIs<span class=\"token punctuation\">(</span>future_question<span class=\"token punctuation\">.</span>was_published_recently<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_was_published_recently_with_recent_question</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        time <span class=\"token operator\">=</span> timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">23</span><span class=\"token punctuation\">,</span> minutes<span class=\"token operator\">=</span><span class=\"token number\">59</span><span class=\"token punctuation\">,</span> seconds<span class=\"token operator\">=</span><span class=\"token number\">59</span><span class=\"token punctuation\">)</span>\n        future_question <span class=\"token operator\">=</span> Question<span class=\"token punctuation\">(</span>pub_date<span class=\"token operator\">=</span>time<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertIs<span class=\"token punctuation\">(</span>future_question<span class=\"token punctuation\">.</span>was_published_recently<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_was_published_recently_with_future_question</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        time <span class=\"token operator\">=</span> timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n        future_question <span class=\"token operator\">=</span> Question<span class=\"token punctuation\">(</span>pub_date<span class=\"token operator\">=</span>time<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertIs<span class=\"token punctuation\">(</span>future_question<span class=\"token punctuation\">.</span>was_published_recently<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ㅤ</p>\n<p>ㅤ</p>\n<h2 id=\"뷰-테스트\" style=\"position:relative;\"><a href=\"#%EB%B7%B0-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"뷰 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뷰 테스트</h2>\n<p>앞에서 작성했던 테스트와 동일한 현상으로 <code class=\"language-text\">polls</code> 어플리케이션은 뷰에도 버그가 있는데 바로 미래의 설문도 공개되어 보여진다는 것이다. 다시 말하면, <code class=\"language-text\">pub_date</code>가 미래로 작성되어 있는 경우에는 현재 노출되어선 안되고, 미래의 그 시점이 왔을 때 보여줘야한다.</p>\n<p>ㅤ</p>\n<h3 id=\"django-테스트-클라이언트\" style=\"position:relative;\"><a href=\"#django-%ED%85%8C%EC%8A%A4%ED%8A%B8-%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8\" aria-label=\"django 테스트 클라이언트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django 테스트 클라이언트</h3>\n<p>Django는 뷰 레벨에서 코드와 상호 작용하는 사용자를 시뮬레이트하기 위해 테스트 클라이언트 클래스인 <code class=\"language-text\">Client</code>를 제공하는데, 이 테스트 클라이언트는 <code class=\"language-text\">tests.py</code> 또는 <code class=\"language-text\">shell</code> 에서 사용할 수 있다.</p>\n<p><strong>1. Shell 을 이용한 방법</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ python manage.py shell\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> from django.test.utils <span class=\"token function\">import</span> setup_test_environment\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> setup_test_environment<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>여기서는 <code class=\"language-text\">tests.py</code>에서 테스트 케이스를 작성하던 것과 달리 하지 않았던 두 가지 일을 해야하는데, 첫 번째는 바로 <code class=\"language-text\">setup_test_environment()</code>를 이용한 테스트 환경을 구성하는 것이다.</p>\n<p><code class=\"language-text\">response.context</code>와 같은 <code class=\"language-text\">response</code>의 추가적인 속성을 사용할 수 있게 하기 위해서는 <code class=\"language-text\">setup_test_environment()</code>를 사용하여 템플릿 렌더러를 설치해야한다. 여기서 알아야할 것은 <u>이 메소드는 테스트 데이터베이스를 셋업하지 않는다.</u> 그렇기 때문에 테스트는 현재 사용중인 데이터베이스 위에서 돌게되며 결과는 데이터베이스에 이미 만들어져있는 질문들에 따라 조금씩 달라질 수 있다. 또한 <code class=\"language-text\">settings.py</code>의 <code class=\"language-text\">TIME_ZONE</code>이 올바르지 않으면 예상과 다른 결과가 나타날 수 있으니, 초기 설정을 꼭 확인하는 것이 중요하다. (나는 Asia/Seoul로 설정했다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>test <span class=\"token keyword\">import</span> Client\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> client <span class=\"token operator\">=</span> Client<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>그 다음 테스트를 위한 테스트 클라이언트 클래스를 <code class=\"language-text\">import</code>한다. <code class=\"language-text\">TestCase</code>는 <code class=\"language-text\">tests.py</code>에서 사용할 것으로 여기서는 사용하지 않는다.</p>\n<p>ㅤ</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token comment\"># on the other hand we should expect to find something at '/polls/'</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token comment\"># we'll use 'reverse()' rather than a hardcoded URL</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> reverse\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> response <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'polls:index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> response<span class=\"token punctuation\">.</span>status_code\n<span class=\"token number\">200</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> response<span class=\"token punctuation\">.</span>content\n<span class=\"token string\">b'\\n    &lt;ul>\\n    \\n        &lt;li>&lt;a href=\"/polls/1/\">What&amp;#x27;s up?&lt;/a>&lt;/li>\\n    \\n    &lt;/ul>\\n\\n'</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> response<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'latest_question_list'</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">&lt;</span>QuerySet <span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span>Question<span class=\"token punctuation\">:</span> What's up?<span class=\"token operator\">></span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></code></pre></div>\n<p>ㅤ</p>\n<h3 id=\"뷰-개선하기\" style=\"position:relative;\"><a href=\"#%EB%B7%B0-%EA%B0%9C%EC%84%A0%ED%95%98%EA%B8%B0\" aria-label=\"뷰 개선하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뷰 개선하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/views.py</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">IndexView</span><span class=\"token punctuation\">(</span>generic<span class=\"token punctuation\">.</span>ListView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    template_name <span class=\"token operator\">=</span> <span class=\"token string\">'polls/index.html'</span>\n    context_object_name <span class=\"token operator\">=</span> <span class=\"token string\">'latest_question_list'</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_queryset</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"Return the last five published questions.\"\"\"</span>\n        <span class=\"token keyword\">return</span> Question<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'-pub_date'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p><code class=\"language-text\">IndexView</code>를 보면 <code class=\"language-text\">Question.objects.order_by(&#39;-pub_date&#39;)[:5]</code>로 <code class=\"language-text\">-pub_data</code> 기준으로 내림차순된 5개의 데이터를 리턴한다. 아직도 뷰에서는 동일한 버그가 존재한다는 뜻이다.</p>\n<p>다음과 같이 변경한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/views.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> timezone\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">IndexView</span><span class=\"token punctuation\">(</span>generic<span class=\"token punctuation\">.</span>ListView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    template_name <span class=\"token operator\">=</span> <span class=\"token string\">'polls/index.html'</span>\n    context_object_name <span class=\"token operator\">=</span> <span class=\"token string\">'latest_question_list'</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_queryset</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    \t<span class=\"token keyword\">return</span> Question<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>\n            pub_date__lte<span class=\"token operator\">=</span>timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'-pub_date'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>처음에 따라 작성하면서 이게 맞는건가라고 계속 생각했다. 사실 처음 보는 <code class=\"language-text\">pub_date__lte</code>가 있었기 때문인데, <code class=\"language-text\">pub_date__lte</code>에서 <code class=\"language-text\">__lte</code>는 <code class=\"language-text\">같거나 보다 작다</code> 라는 뜻으로 <code class=\"language-text\">timezone.now()</code> 보다 같거나 작은 데이터만 필터링하고 그 안에서 <code class=\"language-text\">pub_date</code>를 기준으로 내림차순된 5개의 리스트를 가져온 것이다.</p>\n<p><strong>참고</strong></p>\n<ul>\n<li><a href=\"https://brownbears.tistory.com/63\">Django ORM - 불곰</a></li>\n</ul>\n<p><strong>순서</strong></p>\n<ol>\n<li><code class=\"language-text\">filter(pub_date__lte=timezone.now())</code></li>\n<li><code class=\"language-text\">order_by(&#39;-pub_date&#39;)[:5]</code></li>\n</ol>\n<p>ㅤ</p>\n<h3 id=\"새로운-listview-테스트\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-listview-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"새로운 listview 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 ListView 테스트</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/test.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> reverse\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">create_question</span><span class=\"token punctuation\">(</span>question_text<span class=\"token punctuation\">,</span> days<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Create a question with the given `question_text` and published the\n    given number of `days` offset to now (negative for questions published\n    in the past, positive for questions that have yet to be published).\n    \"\"\"</span>\n    time <span class=\"token operator\">=</span> timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span>days<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> Question<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>question_text<span class=\"token operator\">=</span>question_text<span class=\"token punctuation\">,</span> pub_date<span class=\"token operator\">=</span>time<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionIndexViewTests</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_no_questions</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        If no questions exist, an appropriate message is displayed.\n        \"\"\"</span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'polls:index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertContains<span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">,</span> <span class=\"token string\">\"No polls are available.\"</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertQuerysetEqual<span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'latest_question_list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_past_question</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        Questions with a pub_date in the past are displayed on the\n        index page.\n        \"\"\"</span>\n        create_question<span class=\"token punctuation\">(</span>question_text<span class=\"token operator\">=</span><span class=\"token string\">\"Past question.\"</span><span class=\"token punctuation\">,</span> days<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'polls:index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertQuerysetEqual<span class=\"token punctuation\">(</span>\n            response<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'latest_question_list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">[</span><span class=\"token string\">'&lt;Question: Past question.>'</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_future_question</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        Questions with a pub_date in the future aren't displayed on\n        the index page.\n        \"\"\"</span>\n        create_question<span class=\"token punctuation\">(</span>question_text<span class=\"token operator\">=</span><span class=\"token string\">\"Future question.\"</span><span class=\"token punctuation\">,</span> days<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'polls:index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertContains<span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">,</span> <span class=\"token string\">\"No polls are available.\"</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertQuerysetEqual<span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'latest_question_list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_future_question_and_past_question</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        Even if both past and future questions exist, only past questions\n        are displayed.\n        \"\"\"</span>\n        create_question<span class=\"token punctuation\">(</span>question_text<span class=\"token operator\">=</span><span class=\"token string\">\"Past question.\"</span><span class=\"token punctuation\">,</span> days<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n        create_question<span class=\"token punctuation\">(</span>question_text<span class=\"token operator\">=</span><span class=\"token string\">\"Future question.\"</span><span class=\"token punctuation\">,</span> days<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'polls:index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertQuerysetEqual<span class=\"token punctuation\">(</span>\n            response<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'latest_question_list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">[</span><span class=\"token string\">'&lt;Question: Past question.>'</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_two_past_questions</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        The questions index page may display multiple questions.\n        \"\"\"</span>\n        create_question<span class=\"token punctuation\">(</span>question_text<span class=\"token operator\">=</span><span class=\"token string\">\"Past question 1.\"</span><span class=\"token punctuation\">,</span> days<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n        create_question<span class=\"token punctuation\">(</span>question_text<span class=\"token operator\">=</span><span class=\"token string\">\"Past question 2.\"</span><span class=\"token punctuation\">,</span> days<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'polls:index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertQuerysetEqual<span class=\"token punctuation\">(</span>\n            response<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'latest_question_list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">[</span><span class=\"token string\">'&lt;Question: Past question 2.>'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'&lt;Question: Past question 1.>'</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">)</span></code></pre></div>\n<p>굉장히 코드가 길다. 하나하나 살펴보자.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">create_question(question_text, days)</code></p>\n<ul>\n<li>테스트 과정 중 <code class=\"language-text\">poll</code>은 생성하는 부분에서 반복적으로 사용됨</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">QuestionIndexViewTests</code></p>\n<ul>\n<li><code class=\"language-text\">test_no_questions</code>: 질문이 없는 경우 테스트</li>\n<li><code class=\"language-text\">response</code> 안에 <code class=\"language-text\">No polls are available</code>이 포함되어 있는지 확인</li>\n<li><code class=\"language-text\">response.context</code> 내 최근 질문 리스트가 빈 리스트인지 확인</li>\n<li><code class=\"language-text\">test_past_question</code> : 과거 질문이 있는 경우 테스트</li>\n<li>30일 전 (한달 전) 질문을 하나 생성하고 생성된 테스트가 <code class=\"language-text\">context</code> 안에 있는지 확인</li>\n<li><code class=\"language-text\">test_future_question</code></li>\n<li>미래 질문 하나 생성 후 <code class=\"language-text\">IndexView</code>에서 보여주지 않는지 확인</li>\n<li><code class=\"language-text\">test_future_question_and_past_question</code></li>\n<li><code class=\"language-text\">test_two_past_question</code></li>\n</ul>\n</li>\n</ul>\n<p>ㅤ</p>\n<h3 id=\"detailview-테스트하기\" style=\"position:relative;\"><a href=\"#detailview-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0\" aria-label=\"detailview 테스트하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DetailView 테스트하기</h3>\n<p>현재 <code class=\"language-text\">DetailView</code>에 치명적인 버그가 있는데, 사용자가 URL을 알고 있거나 패턴을 통해 추측 가능하다면 미래의 설문까지 접근할 수 있는데, 이를 위해 <code class=\"language-text\">DetailView</code>에 제약 조건 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/views.py</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DetailView</span><span class=\"token punctuation\">(</span>generic<span class=\"token punctuation\">.</span>DetailView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    model <span class=\"token operator\">=</span> Question\n    template_name <span class=\"token operator\">=</span> <span class=\"token string\">'polls/detail.html'</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_queryset</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> Question<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>pub_date__lte<span class=\"token operator\">=</span>timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"새로운-detailview-테스트\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%9C%EC%9A%B4-detailview-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"새로운 detailview 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새로운 DetailView 테스트</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/tests.py</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionDetailViewTests</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_future_question</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        The detail view of a question with a pub_date in the future\n        returns a 404 not found.\n        \"\"\"</span>\n        future_question <span class=\"token operator\">=</span> create_question<span class=\"token punctuation\">(</span>question_text<span class=\"token operator\">=</span><span class=\"token string\">'Future question.'</span><span class=\"token punctuation\">,</span> days<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n        url <span class=\"token operator\">=</span> reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'polls:detail'</span><span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>future_question<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span> <span class=\"token number\">404</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_past_question</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        The detail view of a question with a pub_date in the past\n        displays the question's text.\n        \"\"\"</span>\n        past_question <span class=\"token operator\">=</span> create_question<span class=\"token punctuation\">(</span>question_text<span class=\"token operator\">=</span><span class=\"token string\">'Past Question.'</span><span class=\"token punctuation\">,</span> days<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n        url <span class=\"token operator\">=</span> reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'polls:detail'</span><span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>past_question<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        response <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertContains<span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">,</span> past_question<span class=\"token punctuation\">.</span>question_text<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ㅤ</p>\n<h2 id=\"테스트는-많이-할-수록-좋다\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%8A%94-%EB%A7%8E%EC%9D%B4-%ED%95%A0-%EC%88%98%EB%A1%9D-%EC%A2%8B%EB%8B%A4\" aria-label=\"테스트는 많이 할 수록 좋다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테스트는 많이 할 수록 좋다.</h2>\n<p>앞서 작성했던 테스트 코드를 보면 실제로 작성했던 <code class=\"language-text\">Model</code>, <code class=\"language-text\">View</code> 보다 훨씬 더 긴 테스트 코드들을 작성했는데, 어떻게 본다면 테스트 코드가 오히려 어플리케이션을 통제하고 있다고 볼 수도 있을 것이고, 어플리케이션이 점점 개발되어가면서 테스트 코드가 훨씬 더 많아질텐데 여기서 말하고자하는건 테스트 코드가 비대해지는걸 신경쓰지말라고 한다. 테스트 코드가 비대해질수록 프로그램을 개발하는 동안 계속해서 작동하고 계속해서 문제가 없다는 것을 수시로 보고해줄 것이기 때문이다. (내 의견) 하지만 때로는 테스트를 업데이트하고 테스트를 삭제하는 등의 행위가 있을 수 있는데, 이런 행위를 불필요한 행위로 여기지 말았으면 좋겠다. (우선 나부터 좀 지키자)</p>\n<p>테스트하는 좋은 방법은 다음과 같다.</p>\n<ul>\n<li>각 모델이나 뷰에 대한 별도의 <code class=\"language-text\">TestClass</code></li>\n<li>테스트하려는 각 조건 집합에 대해 분리된 테스트 방법</li>\n<li>기능을 설명하는 테스트 메소드 이름 (나는 이게 가장 좋은 방법이라 생각한다)</li>\n</ul>\n<p>ㅤ</p>\n<h3 id=\"추가-테스팅\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80-%ED%85%8C%EC%8A%A4%ED%8C%85\" aria-label=\"추가 테스팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>추가 테스팅</h3>\n<p>앞서서 본 것들은 코드만 테스트했다고 볼 수도 있지만, 사실 여러가지 테스트 기법들이 있다. 그 중 하나가 <code class=\"language-text\">Selenium</code> 같은 브라우저 내 프레임 워크를 이용하여 HTML이 브라우저에서 실제로 렌더링되는 방식을 테스트할 수 있다. 실제로 Django에서는 <code class=\"language-text\">LiveServerTestCase</code>가 포함되어 있어 <code class=\"language-text\">Selenium</code>과 같은 도구와 쉽게 통합할 수 있게 해준다.</p>\n<p>복잡한 어플리케이션을 사용하는 경우 <a href=\"https://en.wikipedia.org/wiki/Continuous_integration\">연속적으로 통합</a>하기 위해 모든 커밋마다 자동으로 테스트를 실행하여 품질 제어가 적어도 부분적으로 자동화되도록 할 수 있습니다. 어플리케이션에서 테스트되지 않은 부분을 테스트하는 좋은 방법은 <code class=\"language-text\">코드 커버리지</code>를 확인하는 것이다.</p>\n<h2 id=\"django-tutorial-part-6\" style=\"position:relative;\"><a href=\"#django-tutorial-part-6\" aria-label=\"django tutorial part 6 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django Tutorial Part 6</h2>\n<blockquote>\n<p>Part 5와 이어지는 내용으로 스타일 시트와 이미지를 추가하여 웹에서의 모양을 조금 더 아름답게 변경할 것이다.</p>\n</blockquote>\n<p>ㅤ</p>\n<p>먼저 서버에서 생성된 HTML을 제외하고, 웹 어플리케이션은 일반적으로 전체 웹 페이지를 렌더링하는 데 필요한 추가 파일을 제공해야합니다. Django에서는 이러한 파일을 “정적 파일”이라고 부르는데, 영문으로는 “Static Files” 라고 합니다. 주로 <code class=\"language-text\">/static</code> 폴더에 저장되어 <code class=\"language-text\">css, javascript</code> 등의 파일이 있습니다.</p>\n<p>이러한 <code class=\"language-text\">static</code> 폴더를 위해 Django에는 <code class=\"language-text\">django.contrib.staticfiles</code>가 존재하는데, 이는 각 응용 프로그램의 정적 파일들을 프로덕션 환경에서 쉽게 제공할 수 있도록 단일 위치로 수집합니다.</p>\n<p>ㅤ</p>\n<h2 id=\"앱의-모양과-느낌을-원하는-대로-변경하기\" style=\"position:relative;\"><a href=\"#%EC%95%B1%EC%9D%98-%EB%AA%A8%EC%96%91%EA%B3%BC-%EB%8A%90%EB%82%8C%EC%9D%84-%EC%9B%90%ED%95%98%EB%8A%94-%EB%8C%80%EB%A1%9C-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0\" aria-label=\"앱의 모양과 느낌을 원하는 대로 변경하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>앱의 모양과 느낌을 원하는 대로 변경하기</h2>\n<p>먼저 <code class=\"language-text\">polls</code> 디렉토리에 <code class=\"language-text\">static</code> 디렉토리를 생성하고, <code class=\"language-text\">polls/templates/</code> 안에 템플릿을 찾는 것과 비슷하게 정적 파일을 찾도록 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ tree\n├── __init__.py\n├── admin.py\n├── apps.py\n├── migrations\n├── models.py\n├── static\n│   └── polls\n├── templates\n│   └── polls\n│       ├── detail.html\n│       ├── index.html\n│       └── results.html\n├── tests.py\n├── urls.py\n└── views.py</code></pre></div>\n<p>몇 가지 생략되었지만, <code class=\"language-text\">templates/polls</code> 와 유사하게 <code class=\"language-text\">static/polls</code> 로 생성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* polls/static/polls/style.css */</span>\n<span class=\"token selector\">li a</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> green<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- polls/templates/polls/index.html --></span>\n{% load static %}\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{% static <span class=\"token punctuation\">'</span>polls/style.css<span class=\"token punctuation\">'</span> %}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<ul>\n<li><code class=\"language-{\"> static </code> 템플릿 태그는 정적 파일의 절대 URL을 생성한다.</li>\n<li>위 <code class=\"language-text\">css</code>는 질문의 링크가 녹색으로 변경 (튜토리얼에서는 장고 스타일이란다… ㅎ..)</li>\n</ul>\n<p>ㅤ</p>\n<h2 id=\"배경-이미지-추가하기\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%EA%B2%BD-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"배경 이미지 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배경 이미지 추가하기</h2>\n<p>다음은 이미지용 하위 디렉토리 만들기로 <code class=\"language-text\">polls/static/polls</code> 디렉토리에 <code class=\"language-text\">images</code> 서브 디렉토리를 만들어 이 디렉토리 안에 <code class=\"language-text\">background.gif</code>라는 이미지를 넣는다. (나는 jpg 파일로 했다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* polls/static/polls/style.css */</span>\n<span class=\"token selector\">li a</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> green<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> white <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string url\">\"images/background.jpg\"</span><span class=\"token punctuation\">)</span></span> no-repeat<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"django-tutorial-part-7\" style=\"position:relative;\"><a href=\"#django-tutorial-part-7\" aria-label=\"django tutorial part 7 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Django Tutorial Part 7</h2>\n<blockquote>\n<p>Part 6와 이전에 자동으로 생성했던 관리자 사이트를 커스터마이징하는 데 초점을 맞춘 튜토리얼이다.</p>\n</blockquote>\n<p>ㅤ</p>\n<h2 id=\"관리자-폼-커스터마이징\" style=\"position:relative;\"><a href=\"#%EA%B4%80%EB%A6%AC%EC%9E%90-%ED%8F%BC-%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95\" aria-label=\"관리자 폼 커스터마이징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>관리자 폼 커스터마이징</h2>\n<p><code class=\"language-text\">Question</code> 모델을 <code class=\"language-text\">admin.site.register(Question)</code>에 등록하면서 Django는 디폴트 폼 표현을 구성할 수 있었는데, 관리 폼이 보이고 작동하는 방법을 커스터마이징하려는 경우가 있습니다. 이럴 때에는 객체를 등록 할 때 Django에 원하는 옵션을 알려주면 커스터마이징 할 수 있습니다.</p>\n<p>수정 폼의 필드를 재정렬하여 작동하는 법을 확인하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/admin.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'pub_date'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'question_text'</span><span class=\"token punctuation\">]</span>\nadmin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> QuestionAdmin<span class=\"token punctuation\">)</span></code></pre></div>\n<p>기능적으로 큰 차이는 없지만 결과 이미지를 보면 기존에는 <code class=\"language-text\">Question text</code> 다음 <code class=\"language-text\">Date published</code> 순서로 입력했다면, 이제는 <code class=\"language-text\">fields</code>에 입력한 순서대로 <code class=\"language-text\">Date published</code> 후 <code class=\"language-text\">Question text</code>를 입력하도록 변경되었다.</p>\n<p>튜토리얼에서 2개의 필드의 순서를 바꾸는 것이 어떻게보면 비효율적이고 가시적인 결과가 나타난 것 같지는 않지만, 만약에 수십 개의 필드가 있고, 특정 필드는 설정할 필요가 없을 경우에는 이런 방법으로 순서를 변경하는 것은 편리성 부분에서 중요한 포인트이다.</p>\n<p>만약에 필드마다 카테고리가 있고, 카테고리로 필드를 묶고 싶으면 아래와 같은 형식으로도 관리자 폼을 만들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/admin.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Question\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    fieldsets <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">(</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span>               <span class=\"token punctuation\">{</span><span class=\"token string\">'fields'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'question_text'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span><span class=\"token string\">'Date information'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'fields'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'pub_date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\nadmin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> QuestionAdmin<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ㅤ</p>\n<p>ㅤ</p>\n<h2 id=\"관련된-객체-추가\" style=\"position:relative;\"><a href=\"#%EA%B4%80%EB%A0%A8%EB%90%9C-%EA%B0%9D%EC%B2%B4-%EC%B6%94%EA%B0%80\" aria-label=\"관련된 객체 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>관련된 객체 추가</h2>\n<p><code class=\"language-text\">Question</code> 관리자 페이지는 만들었지만, <code class=\"language-text\">Choice</code> 와 관련된 설정은 관리자 페이지에서 할 수 없는데, 이를 해결하기 위해서 <code class=\"language-text\">admin</code> 페이지에 <code class=\"language-text\">Choice</code>도 추가했다. (나는 이미 이전에 귀찮아서 넣어버려놨다..)</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin\n\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Choice<span class=\"token punctuation\">,</span> Question\n<span class=\"token comment\"># ...</span>\nadmin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span>Choice<span class=\"token punctuation\">)</span></code></pre></div>\n<p>하지만, 이대로 관리자 페이지에서 <code class=\"language-text\">Choice</code>를 선택하여 들어가면, 매우 비효율적이다. 그 이유는 <code class=\"language-text\">Question</code>이 <code class=\"language-text\">ForeignKey</code> 관계를 가진 객체이기 때문인데, Django에서는 <code class=\"language-text\">ForeignKey</code>를 가진 객체는 모두 <code class=\"language-text\">Add Another</code>이라는 링크를 갖게 된다. <code class=\"language-text\">Add Another</code> 링크가 수행하는 과정을 설명하면 다음과 같다.</p>\n<ol>\n<li><code class=\"language-text\">Add Question</code> 폼이 있는 팝업창이 나타난다.</li>\n<li>팝업창에 질문을 추가하고 <code class=\"language-text\">Save</code>를 클릭하면 Django는 질문을 데이터베이스에 저장한다.</li>\n<li>저장된 질문을 동적으로 보고 있었던 <code class=\"language-text\">Add Choice</code> 폼에 추가하여 질문을 선택할 수 있게한다.</li>\n</ol>\n<p>이 과정이 매우 비효율적이라 하는데, 사실 나도 그렇게 생각했다. 그 이유 중 하나는 <code class=\"language-text\">Question</code>을 만들면서 <code class=\"language-text\">Choice</code>도 동시에 만들면 되지 않을까라고 생각했다. 왜냐면 <code class=\"language-text\">Question</code>을 만들고 다시 관리자 메인 화면으로 돌아와 다시 <code class=\"language-text\">Choice</code>를 선택하여 들어가서 그 안에서 질문을 선택한 후에야 <code class=\"language-text\">Choice</code>를 추가할 수 있는데, 이게 여간 비효율적인게 아니다. 만약 질문을 여러개 생성해야한다고 생각해보자. 얼마나 짜증날까..</p>\n<p>그래서 해결하기 위한 방법은 <code class=\"language-text\">Question</code> 객체를 생성할 때 여러 개의 <code class=\"language-text\">Choice</code>를 추가할 수 있도록 하는 방법인데, 방법은 <code class=\"language-text\">Choice</code> 모델에 대해 <code class=\"language-text\">register()</code> 호출을 제거하고, <code class=\"language-text\">Question</code> 등록 코드를 다음과 같이 수정하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/admin.py</span>\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib <span class=\"token keyword\">import</span> admin\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Choice<span class=\"token punctuation\">,</span> Question\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ChoiceInline</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>StackedInline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    model <span class=\"token operator\">=</span> Choice\n    extra <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    fieldsets <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">(</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span>               <span class=\"token punctuation\">{</span><span class=\"token string\">'fields'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'question_text'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span><span class=\"token string\">'Date information'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'fields'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'pub_date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'classes'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'collapse'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n    inlines <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>ChoiceInline<span class=\"token punctuation\">]</span>\n\nadmin<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">.</span>register<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> QuestionAdmin<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># admin.site.register(Choice) 이를 제거</span></code></pre></div>\n<p>ㅤ</p>\n<p>이런 다음 다시 Django 관리자 페이지에 들어가서 <code class=\"language-text\">Question</code> 페이지에 들어가면, <code class=\"language-text\">Choices</code>라는 카테고리(?)가 생성되어 기본적으로 3개의 리스트가 생겨 그 안에 선택 항목을 추가할 수 있도록 변경되었다.</p>\n<p>만약 위와 같이 리스트 형태가 보기에 적합하지 않다면, <code class=\"language-text\">TabularInline</code>으로 변경 가능하다. 이는 테이블 형식의 라인뷰로 마치 표의 형태로 선택 항목을 추가가 가능하도록 작성되어 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ChoiceInline</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>TabularInline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># ...</span></code></pre></div>\n<p>ㅤ</p>\n<p>ㅤ</p>\n<h2 id=\"관리자-변경-목록-change-list-커스터-마이징\" style=\"position:relative;\"><a href=\"#%EA%B4%80%EB%A6%AC%EC%9E%90-%EB%B3%80%EA%B2%BD-%EB%AA%A9%EB%A1%9D-change-list-%EC%BB%A4%EC%8A%A4%ED%84%B0-%EB%A7%88%EC%9D%B4%EC%A7%95\" aria-label=\"관리자 변경 목록 change list 커스터 마이징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>관리자 변경 목록 (change list) 커스터 마이징</h2>\n<blockquote>\n<p>관리자 변경 목록 커스터마이징이라길래 변경 목록이 뭐지하고 한참을 찾아봤다..</p>\n</blockquote>\n<p>기본적인 <code class=\"language-text\">Question</code> 변경 목록을 보면 아주 심플하게 (아주아주) <code class=\"language-text\">Question_text</code>만 리스트로 나열되어 있는데, 이렇게 되면 <code class=\"language-text\">pub_date</code>라던가, 최근 추가된 질문인지 눌러서 확인하는 수밖에 없다. 그럼 관리상에 이유로 매우 번거로운 작업들이 매번 반복될텐데 이를 방지하기 위해 커스터 마이징을 하려 한다.</p>\n<p>기본적으로 <code class=\"language-text\">list_display</code>가 있어, 각 객체의 <code class=\"language-text\">PK</code> 값만 주로 보여주는데 <code class=\"language-text\">list_display</code>를 수정하여 보다 다양한 필드를 보여지게 할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/admin.py</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># ...</span>\n    list_display <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'question_text'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pub_date'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ㅤ</p>\n<p>이와 같이 <code class=\"language-text\">list_display = (&#39;question_text&#39;, &#39;pub_date&#39;)</code>를 작성하면 (튜플로 작성) 기존 하나의 필드만 보여주던 것에서 <code class=\"language-text\">pub_date</code>가 추가되어 볼 수 있다. 하지만 더 나아가 <code class=\"language-text\">was_published_recently()</code>도 추가하고 싶기 때문에, 하나 더 추가하면 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># polls/admin.py</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># ...</span>\n    list_display <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'question_text'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pub_date'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'was_published_recently'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ㅤ</p>\n<p>단순히 메소드명만 추가하면 된다. 하지만 여기서 더 나아가 <u>모델에 몇 가지 속성을 부여</u>하여 <code class=\"language-text\">filter</code> 기능을 추가할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Question</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># ...</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">was_published_recently</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        now <span class=\"token operator\">=</span> timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> now <span class=\"token operator\">-</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> self<span class=\"token punctuation\">.</span>pub_date <span class=\"token operator\">&lt;=</span> now\n    was_published_recently<span class=\"token punctuation\">.</span>admin_order_field <span class=\"token operator\">=</span> <span class=\"token string\">'pub_date'</span>\n    was_published_recently<span class=\"token punctuation\">.</span>boolean <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n    was_published_recently<span class=\"token punctuation\">.</span>short_description <span class=\"token operator\">=</span> <span class=\"token string\">'Published recently?'</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    fieldsets <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">(</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span>               <span class=\"token punctuation\">{</span><span class=\"token string\">'fields'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'question_text'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span><span class=\"token string\">'Date information'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'fields'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'pub_date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'classes'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'collapse'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n    inlines <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>ChoiceInline<span class=\"token punctuation\">]</span>\n    list_filter <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'pub_date'</span><span class=\"token punctuation\">]</span>\n    list_display <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'question_text'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pub_date'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'was_published_recently'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ㅤ</p>\n<p>그리고 손쉽게 검색 기능도 만들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">QuestionAdmin</span><span class=\"token punctuation\">(</span>admin<span class=\"token punctuation\">.</span>ModelAdmin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    fieldsets <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">(</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span>               <span class=\"token punctuation\">{</span><span class=\"token string\">'fields'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'question_text'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span><span class=\"token string\">'Date information'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'fields'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'pub_date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'classes'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'collapse'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n    inlines <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>ChoiceInline<span class=\"token punctuation\">]</span>\n    search_fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'question_text'</span><span class=\"token punctuation\">]</span>\n    list_filter <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'pub_date'</span><span class=\"token punctuation\">]</span>\n    list_display <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'question_text'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pub_date'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'was_published_recently'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>손쉽게 검색 기능을 만들었지만, <code class=\"language-text\">LIKE</code> 쿼리를 사용하기 대문에 검색 필드의 수를 적당한 수로 제한해야하는 필요성이 있다. (당연한 말이지만, 여러 필드에서 동시에 <code class=\"language-text\">LIKE</code> 쿼리는… )</p>\n<p>ㅤ</p>\n<p>ㅤ</p>\n<h2 id=\"관리자-look--feel-커스터마이징\" style=\"position:relative;\"><a href=\"#%EA%B4%80%EB%A6%AC%EC%9E%90-look--feel-%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95\" aria-label=\"관리자 look  feel 커스터마이징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>관리자 Look &#x26; Feel 커스터마이징</h2>\n<blockquote>\n<p>도대체 룩앤필이 뭐야 이랬는데, 디자인을 말하는 것 같다. 사실 Django administarion은 정말로 별로다..</p>\n</blockquote>\n<p>ㅤ</p>\n<h3 id=\"프로젝트-템플릿-커스터마이징\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95\" aria-label=\"프로젝트 템플릿 커스터마이징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로젝트 템플릿 커스터마이징</h3>\n<p>프로젝트 디렉토리 (<code class=\"language-text\">manage.py</code>를 포함하고 있는)에 <code class=\"language-text\">templates</code> 디렉토리를 만든다. (참고 : 템플릿은 Django가 액세스 가능한 모든 디렉토리 어디에서나 사용 가능하다)</p>\n<p>설정 파일 (<code class=\"language-text\">settings.py</code>)을 열고 <code class=\"language-text\">DIRS</code> 옵션을 <code class=\"language-text\">TEMPLATES</code> 설정에 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># mysite/settings.py</span>\nTEMPLATES <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'BACKEND'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'django.template.backends.django.DjangoTemplates'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'DIRS'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>BASE_DIR<span class=\"token punctuation\">,</span> <span class=\"token string\">'templates'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'APP_DIRS'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'OPTIONS'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">'context_processors'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">'django.template.context_processors.debug'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">'django.template.context_processors.request'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">'django.contrib.auth.context_processors.auth'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">'django.contrib.messages.context_processors.messages'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>ㅤ</p>\n<p>그리고 <code class=\"language-text\">django/contrib/admin/templates/admin/base_site.html</code>을 복사하여 <code class=\"language-text\">mysite/templates/admin/base_site.html</code>로 복사하고 <code class=\"language-text\">&#39;Django administration&#39;</code>을 수정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- mysite/templates/admin/base_sites.html --></span>\n{% extends \"admin/base.html\" %} {% block title %}{ { title }} | {{ site_title|default:_('Django site admin') }} {%\nendblock %} {% block branding %}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site-name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{% url <span class=\"token punctuation\">'</span>admin:index<span class=\"token punctuation\">'</span> %}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> Polls Administration <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n{% endblock %} {% block nav-global %}{% endblock %}</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># mysite/templates/admin/base_site.html</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> extends <span class=\"token string\">\"admin/base.html\"</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> block title <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> site_title<span class=\"token operator\">|</span>default<span class=\"token punctuation\">:</span>_<span class=\"token punctuation\">(</span><span class=\"token string\">'Django site admin'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endblock <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> block branding <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>h1 <span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token string\">\"site-name\"</span><span class=\"token operator\">></span>\n\t<span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"{% url 'admin:index' %}\"</span><span class=\"token operator\">></span>\n\t\tPolls administration'<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endblock <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> block nav<span class=\"token operator\">-</span><span class=\"token keyword\">global</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endblock <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"Django 튜토리얼","date":"August 03, 2020"}}},"pageContext":{"slug":"/Django/django-튜토리얼/","previous":{"fields":{"slug":"/Javascript/modern-javascript-tutorials/"},"frontmatter":{"title":"Modern Javascript Tutorials","category":"Javascript","draft":false}},"next":{"fields":{"slug":"/AWS/aws-관련-정리/"},"frontmatter":{"title":"AWS 관련 정리","category":"AWS","draft":false}}}},"staticQueryHashes":["2486386679","3128451518"]}